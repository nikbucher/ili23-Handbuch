<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.25">
<title>Le modèle de données scruté à la loupe</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/*! Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment the following line when using as a custom stylesheet */
/* @import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700"; */
html{font-family:sans-serif;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
b,strong{font-weight:bold}
abbr{font-size:.9em}
abbr[title]{cursor:help;border-bottom:1px dotted #dddddf;text-decoration:none}
dfn{font-style:italic}
hr{height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type=button],input[type=reset],input[type=submit]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type=checkbox],input[type=radio]{padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,::before,::after{box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;line-height:1;position:relative;cursor:auto;-moz-tab-size:4;-o-tab-size:4;tab-size:4;word-wrap:anywhere;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ul.square{list-style-type:square}
ul.circle ul:not([class]),ul.disc ul:not([class]),ul.square ul:not([class]){list-style:inherit}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:1px solid #dedede;word-wrap:normal}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre).nobreak{word-wrap:normal}
:not(pre).nowrap{white-space:nowrap}
:not(pre).pre-wrap{white-space:pre-wrap}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;border-radius:3px;box-shadow:0 1px 0 rgba(0,0,0,.2),inset 0 0 0 .1em #fff;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin:0 auto;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child{border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:flex;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border:1px solid #e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:none;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:hsla(0,0%,100%,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details{margin-left:1.25rem}
details>summary{cursor:pointer;display:block;position:relative;line-height:1.6;margin-bottom:.625rem;outline:none;-webkit-tap-highlight-color:transparent}
details>summary::-webkit-details-marker{display:none}
details>summary::before{content:"";border:solid transparent;border-left:solid;border-width:.3em 0 .3em .5em;position:absolute;top:.5em;left:-1.25rem;transform:translateX(15%)}
details[open]>summary::before{border:solid transparent;border-top:solid;border-width:.5em .3em 0;transform:translateY(15%)}
details>summary::after{content:"";width:1.25rem;height:1em;position:absolute;top:.3em;left:-1.25rem}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class=paragraph]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6);word-wrap:anywhere}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border:1px solid #e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;border-radius:4px}
.sidebarblock{border:1px solid #dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;border-radius:4px}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:first-child,.sidebarblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child,.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{border-radius:4px;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class=highlight],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock pre>code{display:block}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos,pre.pygments .linenos{border-right:1px solid;opacity:.35;padding-right:.5em;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}
pre.pygments span.linenos{display:inline-block;margin-right:.75em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans-serif;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;font-size:.85rem;text-align:left;margin-right:0}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content{margin-bottom:1.25em;word-wrap:anywhere}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>*>tr>*{border-width:1px}
table.grid-cols>*>tr>*{border-width:0 1px}
table.grid-rows>*>tr>*{border-width:1px 0}
table.frame-all{border-width:1px}
table.frame-ends{border-width:1px 0}
table.frame-sides{border-width:0 1px}
table.frame-none>colgroup+*>:first-child>*,table.frame-sides>colgroup+*>:first-child>*{border-top-width:0}
table.frame-none>:last-child>:last-child>*,table.frame-sides>:last-child>:last-child>*{border-bottom-width:0}
table.frame-none>*>tr>:first-child,table.frame-ends>*>tr>:first-child{border-left-width:0}
table.frame-none>*>tr>:last-child,table.frame-ends>*>tr>:last-child{border-right-width:0}
table.stripes-all>*>tr,table.stripes-odd>*>tr:nth-of-type(odd),table.stripes-even>*>tr:nth-of-type(even),table.stripes-hover>*>tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
li>p:empty:only-child::before{content:"";display:inline-block}
ul.checklist>li>p:first-child{margin-left:-1em}
ul.checklist>li>p:first-child>.fa-square-o:first-child,ul.checklist>li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist>li>p:first-child>input[type=checkbox]:first-child{margin-right:.25em}
ul.inline{display:flex;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
td.hdlist2{word-wrap:anywhere}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:4px solid #fff;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active,#footnotes .footnote a:first-of-type:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);border-radius:50%;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt,summary{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,td.hdlist1,span.alt,summary{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]{border-bottom:1px dotted}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#header,#content,#footnotes,#footer{max-width:none}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media amzn-kf8,print{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
</head>
<body class="article">
<div id="header">
</div>
<div id="content">
<div class="sect1">
<h2 id="_6"><a class="anchor" href="#_6"></a>Le modèle de données scruté à la loupe</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_6_1"><a class="anchor" href="#_6_1"></a>Couronnes et centimes – Types de données numériques</h3>
<div class="sect3">
<h4 id="_6_1_1"><a class="anchor" href="#_6_1_1"></a>Domaine de valeurs</h4>
<div class="paragraph">
<p>Un aller simple sur le funiculaire de la Dent d&#8217;Ili coûte 10 couronnes béotiennes et un forfait sportif annuel 635 couronnes. Comment modéliser alors le prix d&#8217;un billet ?</p>
</div>
<div class="paragraph">
<p>Tout lecteur familier des langages de programmation pensera d&#8217;emblée à des valeurs entières (« Integer ») ou à des valeurs en virgule flottante (« Real »). Bon nombre de langages de programmation et de banques de données permettent de définir l&#8217;espace mémoire requis par une de ces valeurs ; la taille et la précision des valeurs mémorisables s&#8217;ensuivent alors (« short integer », «long integer», «double precision», etc.). On réfléchit ensuite à la plage dans laquelle ces valeurs peuvent évoluer et on opte pour la forme de mémorisation convenant le mieux.</p>
</div>
<div class="paragraph">
<p>On ne souhaiterait toutefois pas avoir à se préoccuper du format de mémorisation au niveau conceptuel de la modélisation. Il est cependant possible d&#8217;indiquer les valeurs limites admissibles (minimum et maximum) dès ce stade et de définir le nombre de chiffres et l&#8217;exposant par la même occasion.</p>
</div>
<div class="paragraph">
<p>Les tarifs s&#8217;échelonnant entre 10 et 635 couronnes, on pourrait écrire :</p>
</div>
<div id="listing-06_01-01" class="listingblock">
<div class="title"><a href="#listing-06_01-01">Listing 06.01-01</a></div>
<div class="content">
<pre class="highlight"><code>Prix: 10 .. 635;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Ce faisant, on définirait aussi que le prix ne peut être ni inférieur à 10 couronnes ni supérieur à 635 couronnes, ce que l&#8217;on ne souhaiterait évidemment pas. 0 semble représenter une limite inférieure vraisemblable. Mais qu&#8217;en est-il de la limite supérieure ? Il est peu probable que le prix excède un jour 10'000 couronnes. Alors va pour 10'000 ? Lorsque les contraintes propres à une application ne permettent pas de définir une limite avec clarté, il n&#8217;y a aucun intérêt à choisir la valeur de telle manière qu&#8217;un format de mémorisation plus court (tel que <em>short integer</em> acceptant des valeurs comprises entre –32768 et 32767) en devienne tout juste insuffisant.</p>
</div>
<div class="paragraph">
<p>Dans le même ordre d&#8217;idées, il est également important de réfléchir au nombre de chiffres après la virgule nécessaires. Si les prix sont susceptibles d&#8217;intégrer des centimes, alors les limites sont à fixer avec deux décimales. Si l&#8217;on considère par exemple un attribut représentant un budget d&#8217;investissement, les sommes seront évidemment exprimées en millions de couronnes ; lorsqu&#8217;il ne s&#8217;agit que d&#8217;ordres de grandeur, deux chiffres sont suffisants. Mais ceux-ci peuvent se rapporter aux milliers, aux millions ou aux milliards.</p>
</div>
<div id="listing-06_01-02" class="listingblock">
<div class="title"><a href="#listing-06_01-02">Listing 06.01-02</a></div>
<div class="content">
<pre class="highlight"><code>Prix: 0.00 .. 9999.99;
Budget: 0.00E6 .. 999.99E6;
ProduitNationalBrut : 0.0E0 .. 9.9E20;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Le nombre de chiffres définit la précision : « 4.3 millions » (4.3E6 = 4.3 · 106) constitue une information moins précise que « 4300000 ».</p>
</div>
</div>
<div class="sect3">
<h4 id="_6_1_2"><a class="anchor" href="#_6_1_2"></a>Unités</h4>
<div class="paragraph">
<p>S&#8217;agit-il maintenant de couronnes, de francs, d&#8217;euros ou de dollars ? L&#8217;unité est d&#8217;une importance capitale et pas seulement dans le cas de l&#8217;argent. C&#8217;est pourquoi il est recommandé de l&#8217;intégrer directement au type et non d&#8217;en faire un simple commentaire ou une partie du nom de l&#8217;attribut :</p>
</div>
<div id="listing-06_01-03" class="listingblock">
<div class="title"><a href="#listing-06_01-03">Listing 06.01-03</a></div>
<div class="content">
<pre class="highlight"><code>UNIT
  Couronne EXTENDS MONEY;

CLASS TypeBillet =
  Prix: 0 .. 9999 [Couronnes];
END TypeBillet;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Les couronnes (ou francs suisses, euros, dollars, etc.) sont définies comme unité et peuvent être utilisées lors de la définition d&#8217;un type numérique. La plupart des unités courantes (parmi lesquelles CHF, EUR, USD) n&#8217;ont cependant pas à être définies directement puisqu&#8217;elles existent déjà dans le modèle spécifique des unités (units.ili, cf. § <a href="#_3_3">[_3_3]</a>).</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<div class="title">Warning</div>
</td>
<td class="content">
Par souci de clarté, nous recommandons de toujours indiquer des unités. Outre de très nombreuses unités physiques, le modèle des unités d&#8217;INTERLIS comprend également des unités monétaires de même que des unités de dénombrement ou des pourcentages.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_6_1_3"><a class="anchor" href="#_6_1_3"></a>Hériter des types numériques</h4>
<div class="paragraph">
<p>Comme il est acquis que les Remontées mécaniques de la Dent d&#8217;Ili n&#8217;émettront jamais de billets coûtant plus de mille couronnes, l&#8217;idée de le définir dans une classe particulière pourrait aisément germer :</p>
</div>
<div id="listing-06_01-04" class="listingblock">
<div class="title"><a href="#listing-06_01-04">Listing 06.01-04</a></div>
<div class="content">
<pre class="highlight"><code>CLASS TypeBillet (EXTENDED) =
  Prix (EXTENDED): 0 .. 1000 [Couronnes];
END TypeBillet;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Cet exemple concret ne se justifie pas pleinement ici, mais dans certains cas en pratique, il est tout à fait judicieux de restreindre le domaine de valeurs hérité.</p>
</div>
<div class="paragraph">
<p>Les Ilinois n&#8217;ont toutefois pas le droit de modifier les domaines de valeurs du modèle national comme bon leur semble : le principe selon lequel chaque valeur ilinoise doit également être admissible dans le modèle de base de l&#8217;Association nationale doit pouvoir s&#8217;appliquer. Dans le cas contraire, il ne serait plus garanti que l&#8217;Association nationale puisse prendre en charge des données du Val d&#8217;Ili sans rencontrer de problème.</p>
</div>
<div class="paragraph">
<p>Une plage tarifaire allant de 0 .. 1000 constitue par conséquent une restriction admissible du domaine prévu au plan national, lequel s&#8217;échelonne entre 0 .. 9999. Si l&#8217;on souhaitait cependant étendre le domaine de valeurs dans le Val d&#8217;Ili – pour par exemple passer à une plage de 0 .. 15000 – alors des types de billets coûtant entre 10000 et 15000 couronnes ne seraient plus corrects du point de vue de l&#8217;Association nationale. Une telle définition n&#8217;est par conséquent pas admise.</p>
</div>
<div class="paragraph">
<p>Les Ilinois veulent également avoir la possibilité d&#8217;émettre des billets dont le prix ne soit pas un nombre entier de couronnes mais réponde à la définition suivante :</p>
</div>
<div id="listing-06_01-05" class="listingblock">
<div class="title"><a href="#listing-06_01-05">Listing 06.01-05</a></div>
<div class="content">
<pre class="highlight"><code>CLASS TypeBillet (EXTENDED) =
  Prix (EXTENDED): 0.00 .. 1000.00 [Couronnes];
END TypeBillet;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Est-elle compatible avec le modèle de base ? Oui, car chaque valeur respectant le modèle ilinois (7.35 par exemple) peut être arrondie à une valeur correcte (7 dans ce cas) du point de vue du modèle national.</p>
</div>
<div class="paragraph">
<p>La définition ne serait plus admissible si elle englobait des valeurs violant les règles du modèle de base une fois arrondies. Pour prendre un exemple, une valeur maximale de 9999.99 arrondie à 10000 excèderait la limite supérieure de 9999 prescrite par l&#8217;Association nationale. Les Ilinois pourraient en revanche définir un domaine s&#8217;étendant entre 0.00 .. 9999.49, sans provoquer la moindre contradiction avec le modèle de base car la valeur de 9999.49 fournit à nouveau 9999, une fois arrondie.</p>
</div>
<div class="paragraph">
<p>Il n&#8217;est pas non plus permis de renoncer à la précision dans le modèle spécialisé. Si le modèle national des offices de tourisme prévoyait par exemple un domaine compris entre 0.00 .. 1000.00, les Ilinois ne pourraient pas définir la plage de 0 .. 1000 dans leur spécialisa­tion.</p>
</div>
<div class="paragraph">
<p>Encore un dernier point : les unités de l&#8217;extension doivent toujours coïncider avec celles du modèle de base !</p>
</div>
</div>
<div class="sect3">
<h4 id="_6_1_4"><a class="anchor" href="#_6_1_4"></a>Des limites encore inconnues</h4>
<div class="paragraph">
<p>L&#8217;Association nationale peut-elle définir le prix admissible pour un billet ? Si les limites restent parfaitement inconnues, l&#8217;emploi d&#8217;attributs abstraits peut permettre de renoncer à leur indication. Il reste toutefois possible de définir une unité.</p>
</div>
<div id="listing-06_01-06" class="listingblock">
<div class="title"><a href="#listing-06_01-06">Listing 06.01-06</a></div>
<div class="content">
<pre class="highlight"><code>Prix (ABSTRACT): NUMERIC [Beotie.Couronne];</code></pre>
</div>
</div>
<div class="paragraph">
<p>Et peut-être que l&#8217;unité elle-même reste floue. On sait seulement qu&#8217;il s&#8217;agit d&#8217;une unité monétaire (dans notre exemple).</p>
</div>
<div id="listing-06_01-07" class="listingblock">
<div class="title"><a href="#listing-06_01-07">Listing 06.01-07</a></div>
<div class="content">
<pre class="highlight"><code>Prix (ABSTRACT): NUMERIC [MONEY];</code></pre>
</div>
</div>
<div class="paragraph">
<p>L&#8217;unité est caractérisée si l&#8217;on procède de la sorte. Seules des unités concrétisant l&#8217;unité abstraite MONEY peuvent encore être définies dans le cadre d&#8217;une extension (cf. également § <a href="#_5_4">[_5_4]</a> pour ce qui concerne les propriétés abstraites).</p>
</div>
<div id="listing-06_01-08" class="listingblock">
<div class="title"><a href="#listing-06_01-08">Listing 06.01-08</a></div>
<div class="content">
<pre class="highlight"><code>Prix (EXTENDED): 0 .. 10000 [CHF]; !! permis
Prix (EXTENDED): 0 .. 2000 [USD]; !! permis
Prix (EXTENDED): 0 .. 1000 [m]; !! interdit, le metre concretisant
                                 !! la longueur (LENGTH) et non la
                                 !! monnaie (MONEY).</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_6_2"><a class="anchor" href="#_6_2"></a>Types de remontées mécaniques – Modélisation de types et d&#8217;objets</h3>
<div class="paragraph">
<p>Il suffit, pour un bref aperçu, de subdiviser sommairement les remontées mécaniques (ou lignes de montagne) : chemin de fer à crémaillère, funiculaire, téléphérique, remonte-pente, télésiège, télécabine. Dans le cas le plus simple, le genre est défini comme un attribut textuel.</p>
</div>
<div id="listing-06_02-01" class="listingblock">
<div class="title"><a href="#listing-06_02-01">Listing 06.02-01</a></div>
<div class="content">
<pre class="highlight"><code>CLASS RemonteeMecanique =
  Nom: TEXT*100;
  Genre: TEXT*50;
END RemonteeMecanique;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Il en résulte que la personne amenée à saisir les données bénéficiera d&#8217;une grande liberté au niveau de la description. Télébenne, téléski, skilift, ski-lift – il est à craindre que les désignations les plus diverses se mettent à fleurir. Une énumération permettra de l&#8217;éviter :</p>
</div>
<div id="listing-06_02-02" class="listingblock">
<div class="title"><a href="#listing-06_02-02">Listing 06.02-02</a></div>
<div class="content">
<pre class="highlight"><code>CLASS RemonteeMecanique =
  Nom: TEXT*100;
  Genre: (CheminFerCremaillere,
          Funiculaire,
          Telepherique,
          Remonte_pente,
          Telesiege,
          Telecabine);
END RemonteeMecanique;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Toutes les possibilités offertes étant ainsi énumérées, l&#8217;ordre règne à nouveau. Mais parfois, il est nécessaire d&#8217;ajouter de nouveaux attributs tels que le nombre de places disponibles. Pour un funiculaire et un téléphérique, il s&#8217;agit de la capacité de la cabine entière, alors que le nombre de personnes par trajet est comptabilisé pour un remonte-pente ou un télésiège. Dans le cas du chemin de fer à crémaillère, plusieurs voitures peuvent être accouplées et cette indication a donc peu de signification. Mais c&#8217;est peut-être le système de la crémaillère qui présente de l&#8217;intérêt ici. La classe des remontées mécaniques doit-elle alors intégrer tous les attributs nécessaires à la description des différents genres ?</p>
</div>
<div class="paragraph">
<p>Lorsque les différents genres présentent des propriétés particulières (attributs ou relations), il est judicieux de définir des classes qui leur sont spécifiques, héritant de la classe de base (cf. <a href="#_5">[_5]</a>).</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/image30.png" alt="image30">
</div>
<div class="title">Figure 1. Les chemins de fer à crémaillère, les funiculaires, etc. sont des cas particuliers de remontées mécaniques. Il n&#8217;existe cependant pas de remontées mécaniques à proprement parler : toutes les remontées « concrètes » appartiennent toujours à l&#8217;une des sous-classes. <em>Remontée mécanique</em> est donc une classe abstraite, ce qui est signalé sur le diagramme par l&#8217;écriture du nom en italique.</div>
</div>
<div class="paragraph">
<p>Il n&#8217;existe cependant pas de remontée mécanique qui soit simplement une remontée mécanique sans appartenir à l&#8217;une ou l&#8217;autre des sous-classes. La classe des remontées mécaniques est donc déclarée comme étant « abstraite ». Concrètement, une remontée mécanique doit donc toujours être un chemin de fer à crémaillère, un funiculaire, etc.</p>
</div>
<div class="paragraph">
<p>Dans la notation textuelle d&#8217;INTERLIS 2, les classes abstraites sont signalées par la mention (ABSTRACT). En passant : «Units», le modèle INTERLIS des unités comporte une unité «CountedObjects» pour le décompte d&#8217;objets tels que le nombre de personnes à bord de la cabine d&#8217;un téléphérique.</p>
</div>
<div id="listing-06_02-03" class="listingblock">
<div class="title"><a href="#listing-06_02-03">Listing 06.02-03</a></div>
<div class="content">
<pre class="highlight"><code>CLASS RemonteeMecanique (ABSTRACT) =
  Nom: Text * 100;
END RemonteeMecanique;

CLASS CheminFerCremaillere EXTENDS RemonteeMecanique =
  SystemeCremaillere : (Riggenbach, Abt, vonRoll);
END CheminFerCremaillere;

CLASS Funiculaire EXTENDS RemonteeMecanique =
  Capacite: 0 .. 999 [Units.CountedObjects];
END Funiculaire;

CLASS Telepherique EXTENDS RemonteeMecanique =
  Capacite: 0 .. 999 [Units.CountedObjects];
END Telepherique;

CLASS Remonte_pente EXTENDS RemonteeMecanique =
  PersonnesParTrajet: 0 .. 10 [Units.CountedObjects];
END Remonte_pente;

CLASS Telesiege EXTENDS RemonteeMecanique =
  PersonnesParTrajet: 0 .. 24 [Units.CountedObjects];
END Telesiege;

CLASS Telecabine EXTENDS RemonteeMecanique =
  Capacite: 0 .. 99 [Units.CountedObjects];
END Telecabine;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Un cheminot, tout spécialement convié à la réunion, a présenté un long exposé sur les chemins de fer à crémaillère. L&#8217;assistance a été abreuvée d&#8217;informations sur les différents systèmes de crémaillères en usage de par le monde, agrémentées d&#8217;un comparatif détaillé de leurs avantages et inconvénients respectifs. Les Ilinois en vinrent finalement à se demander quel rapport existait entre les systèmes de crémaillères et leur projet. Personne ne parvenait à s&#8217;imaginer l&#8217;importance que pourraient prendre ces informations un jour, même à l&#8217;occasion d&#8217;une éventuelle extension. En conséquence, le modèle proposé a été rejeté parce que jugé trop détaillé et générateur de coûts superflus, causés par la saisie et la gestion de données en fin de compte inutiles.</p>
</div>
<div class="paragraph">
<p>Cf. également § <a href="#_5_1">[_5_1]</a> pour la tentation d&#8217;aller trop loin dans les détails au niveau de la modélisation.</p>
</div>
</div>
<div class="sect2">
<h3 id="_6_3"><a class="anchor" href="#_6_3"></a>Existe-t-il également des pistes de ski bleu clair ? – Enumérations structurées</h3>
<div class="sect3">
<h4 id="_6_3_1"><a class="anchor" href="#_6_3_1"></a>Enumérations ordinaires et droit d&#8217;héritage associé</h4>
<div class="paragraph">
<p>Trois couleurs ont été sélectionnées pour décrire sommairement le niveau de difficulté des pistes de ski : bleu, rouge et noir. Ces niveaux de difficultés, par ailleurs ordonnés, sont les seuls admis. Le bleu désigne une piste facile, le rouge une piste d&#8217;un niveau plus difficile et le noir est réservé aux pistes les plus exigeantes. Cette situation est décrite par la définition suivante :</p>
</div>
<div id="listing-06_03-01" class="listingblock">
<div class="title"><a href="#listing-06_03-01">Listing 06.03-01</a></div>
<div class="content">
<pre class="highlight"><code>CLASS Piste =
  NiveauDifficulte : (bleu, rouge, noir : FINAL) ORDERED;
END Piste;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Si la mention FINAL était omise, l&#8217;énumération pourrait être complétée dans le cadre d&#8217;une extension, ce qui pourrait présenter un intérêt pour le genre de remontée mécanique :</p>
</div>
<div id="listing-06_03-02" class="listingblock">
<div class="title"><a href="#listing-06_03-02">Listing 06.03-02</a></div>
<div class="content">
<pre class="highlight"><code>!! Modele de l'Association nationale des offices de tourisme
CLASS RemonteeMecanique =
  Genre: (CheminFerCremaillere, Funiculaire, Telepherique,
          Remonte_pente, Telesiege, Telecabine);
END RemonteeMecanique;

!! Modele du Val d'Ili
CLASS Remontee_RDI EXTENDS RemonteeMecanique =
  Genre (EXTENDED): (BusDesNeiges);
END Remontee_RDI;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Dans la classe étendue, l&#8217;élément bus des neiges – une exclusivité du Val d&#8217;Ili – est rajouté à la fin de l&#8217;énumération existante. Mais que peut bien en faire l&#8217;Association nationale des offices de tourisme ? Pour elle, exclusivité ou pas, le «bus des neiges» est parfaitement inconnu.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Chaque extension (horizontale) peut être complétée par des valeurs supplémentaires, tant que cette possibilité n&#8217;est pas explicitement exclue par la mention <strong>FINAL</strong>. Si l&#8217;intérêt d&#8217;un utilisateur se limite aux valeurs définies dans la classe de base, toutes les valeurs supplémentaires sont regroupées sous l&#8217;appellation générique <strong>OTHER</strong>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Pour la classe de base, la valeur bus des neiges (comme toute autre valeur supplémentaire) se fond dans une masse indistincte : OTHER. Cependant, si la mention FINAL a été indiquée, OTHER n&#8217;est plus possible. Si une énumération est définie comme étant cyclique (<strong>CIRCULAR</strong>), de tels compléments ne sont jamais possibles puisque par cyclique, on entend que la première valeur de la liste fait à nouveau suite à la dernière, que l&#8217;on ne saurait d&#8217;ailleurs pas distinguer sans cela.</p>
</div>
<div id="listing-06_03-03" class="listingblock">
<div class="title"><a href="#listing-06_03-03">Listing 06.03-03</a></div>
<div class="content">
<pre class="highlight"><code>DirectionVent: (N, NE, E, SE, S, SW, W, NW) CIRCULAR;</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_6_3_2"><a class="anchor" href="#_6_3_2"></a>Sous-énumérations</h4>
<div class="paragraph">
<p>Il a donc été décidé de ne pas modéliser les différents genres de remontées mécaniques par un nombre trop élevé de classes. Au grand dam des amis du rail : qui sait, la connaissance des systèmes de crémaillères pourrait bien nous servir à quelque chose, un jour ou l&#8217;autre&#8230;&#8203;</p>
</div>
<div class="paragraph">
<p>Il est possible de définir une sous-énumération pour chaque valeur d&#8217;une énumération. Cela peut s&#8217;effectuer directement au sein de la définition de base ou ultérieurement, dans le cadre d&#8217;une extension.</p>
</div>
<div id="listing-06_03-04" class="listingblock">
<div class="title"><a href="#listing-06_03-04">Listing 06.03-04</a></div>
<div class="content">
<pre class="highlight"><code>CLASS Remontee_RDI EXTENDS RemonteeMecanique =
  Genre (EXTENDED): (CheminFerCremaillere (Riggenbach, Abt, vonRoll));
END Remontee_RDI;

JourDeLaSemaine : (JourOuvrable (lundi, mardi, mercredi,
                                 jeudi, vendredi, samedi),
                   dimanche);</code></pre>
</div>
</div>
<div class="paragraph">
<p>Si une telle sous-énumération est définie dans une extension, elle est sans objet du point de vue de la base, de sorte que pour l&#8217;Association nationale des offices de tourisme, une voie à crémaillère Riggenbach est un chemin de fer à crémaillère comme un autre.</p>
</div>
<div class="paragraph">
<p>Les sous-énumérations peuvent à leur tour être étendues par des valeurs supplémentaires, pour autant que la dernière valeur de la liste ne soit pas suivie de la mention FINAL. Par ailleurs, les différentes valeurs d&#8217;une sous-énumération peuvent elles aussi être précisées par des sous-énumérations, si bien que de véritables arborescences d&#8217;énumérations peuvent en résulter.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_6_4"><a class="anchor" href="#_6_4"></a>Les Ilinois se restreignent – Chaînes de caractères et règles d&#8217;héritage associées</h3>
<div class="paragraph">
<p>Les désignations peuvent fondamentalement comprendre des noms de longueur quelconque. L&#8217;Association nationale a cependant décidé que le nom d&#8217;une remontée mécanique devait comporter au plus 100 caractères. Les noms sont bien plus courts que cela en règle générale, on souhaitait simplement se donner une marge de sécurité suffisante.</p>
</div>
<div id="listing-06_04-01" class="listingblock">
<div class="title"><a href="#listing-06_04-01">Listing 06.04-01</a></div>
<div class="content">
<pre class="highlight"><code>STRUCTURE DesignationEntreprise EXTENDS Designation =
  Nom (EXTENDED): TEXT*100;
END DesignationEntreprise;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Si la longueur d&#8217;un attribut textuel est quelconque ou reste totalement inconnue, on peut renoncer à indiquer cette information. En revanche, s&#8217;il est clair que la longueur sera fixée dans le cadre d&#8217;une extension de classe, l&#8217;attribut est à définir comme étant abstrait :</p>
</div>
<div id="listing-06_04-02" class="listingblock">
<div class="title"><a href="#listing-06_04-02">Listing 06.04-02</a></div>
<div class="content">
<pre class="highlight"><code>Description (ABSTRACT): TEXT;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Une web-cam est installée sur certaines lignes du Val d&#8217;Ili, filmant en continu les alentours de la station supérieure afin que les touristes tentés de s&#8217;y rendre puissent voir si le jeu en vaut la chandelle. L&#8217;adresse Internet de l&#8217;image actuelle constitue également un type de texte (d&#8217;un genre un peu particulier toutefois).</p>
</div>
<div id="listing-06_04-03" class="listingblock">
<div class="title"><a href="#listing-06_04-03">Listing 06.04-03</a></div>
<div class="content">
<pre class="highlight"><code>CLASS Remontee_RDI =
  ...
  ImageStationSuperieure: URI;
  ...
END Remontee_RDI;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Contrairement aux apparences, les adresses Internet sont sans lien avec le canton suisse du même nom, tout au plus existe-t-il un lien avec le canton de Genève puisque c&#8217;est au CERN qu&#8217;a été développé le premier navigateur Internet. URI est ici l&#8217;abréviation d'<em>Uniform Resource Identifier.</em> Les URL (<em>Uniform Resource Locators)</em> généralement utilisés pour les pages Internet sont une forme particulière d&#8217;URI.</p>
</div>
</div>
<div class="sect2">
<h3 id="_6_5"><a class="anchor" href="#_6_5"></a>Calme plat – Attributs facultatifs et obligatoires</h3>
<div class="paragraph">
<p>Les données actuelles relatives à l&#8217;exploitation intègrent également des informations météorologiques telles que la température ou la vitesse du vent. L&#8217;indication de la direction du vent ne présente aucun intérêt en cas de calme plat. Les autres informations sont à fournir en toutes circonstances.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Le fait qu&#8217;un attribut puisse être <strong>indéfini</strong> ou qu&#8217;il doive être défini en toutes circonstances est une composante du modèle.
</td>
</tr>
</table>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<div class="title">Warning</div>
</td>
<td class="content">
Indéfini ne signifie pas simplement égal à 0 ou à toute autre valeur particulière. Une valeur spécifique sert à décrire cette situation.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Dans INTERLIS 2, on écrira par exemple :</p>
</div>
<div id="listing-06_05-01" class="listingblock">
<div class="title"><a href="#listing-06_05-01">Listing 06.05-01</a></div>
<div class="content">
<pre class="highlight"><code>CLASS Meteo =
  Temperature: MANDATORY –50 .. 50 [oC];
  DirectionVent: (N, NE, E, SE, S, SW, W, NW) CIRCULAR;
  VitesseVent: MANDATORY 0 .. 200 [kmh];
END Meteo;</code></pre>
</div>
</div>
<div class="paragraph">
<p>La température et la vitesse du vent sont donc obligatoires (MANDATORY). La direction du vent n&#8217;étant pas obligatoirement requise, elle est donc facultative. La valeur concrète de ce paramètre peut donc être indéfinie. Il est permis, dans des extensions, de rendre obligatoires des attributs facultatifs. En revanche, des attributs obligatoires ne peuvent pas devenir facultatifs puisque la valeur « indéfinie » n&#8217;est pas permise dans la classe de base.</p>
</div>
</div>
<div class="sect2">
<h3 id="_6_6"><a class="anchor" href="#_6_6"></a>Délais d&#8217;attente et durées des trajets – Domaines de valeurs</h3>
<div class="paragraph">
<p>Les délais d&#8217;attente sur les remontées mécaniques et les durées des trajets correspondants sont indiqués en minutes.</p>
</div>
<div id="listing-06_06-01" class="listingblock">
<div class="title"><a href="#listing-06_06-01">Listing 06.06-01</a></div>
<div class="content">
<pre class="highlight"><code>CLASS RemonteeMecanique =
  DureeTrajet: 0 .. 200 [min];
END RemonteeMecanique;

CLASS EtatRemonteeMecanique =
  DelaiAttente: 0 .. 200 [min];
END EtatRemonteeMecanique;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Ces deux propriétés peuvent accepter des valeurs issues du même domaine. Cette communauté peut être soulignée par un domaine de valeurs défini explicitement (DOMAIN) :</p>
</div>
<div id="listing-06_06-02" class="listingblock">
<div class="title"><a href="#listing-06_06-02">Listing 06.06-02</a></div>
<div class="content">
<pre class="highlight"><code>DOMAIN
  DureeEnMinutes = 0 .. 200 [min];

CLASS RemonteeMecanique =
  DureeTrajet: DureeEnMinutes;
END RemonteeMecanique;

CLASS EtatRemonteeMecanique =
  DelaiAttente: DureeEnMinutes;
END EtatRemonteeMecanique;</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_6_7"><a class="anchor" href="#_6_7"></a>Mais où se trouve le Val d&#8217;Ili ? – Types de coordonnées</h3>
<div class="sect3">
<h4 id="_6_7_1"><a class="anchor" href="#_6_7_1"></a>Quelques informations de base sur les types de coordonnées</h4>
<div class="paragraph">
<p>La question « où ? » appelle une réponse liée à un lieu ponctuel du monde réel qu&#8217;il est possible de décrire au moyen de coordonnées. Par coordonnées, on entend généralement un couple de valeurs numériques, s&#8217;il s&#8217;agit de positions planimétriques ou un triplet s&#8217;il s&#8217;agit de positions dans l&#8217;espace, planimétrie et altimétrie.</p>
</div>
<div class="paragraph">
<p>Ainsi, il convient de définir, pour chacune des dimensions d&#8217;un type de coordonnées comme pour tout type numérique, le domaine dans lequel les valeurs admissibles peuvent évoluer de même que l&#8217;unité qui leur est associée.</p>
</div>
<div id="listing-06_07-01" class="listingblock">
<div class="title"><a href="#listing-06_07-01">Listing 06.07-01</a></div>
<div class="content">
<pre class="highlight"><code>Position: COORD 500.00 .. 91000.00 [m],
                 700.00 .. 23000.00 [m];

XPos: 500.00 .. 91000.00 [m];
YPos: 700.00 .. 23000.00 [m];</code></pre>
</div>
</div>
<div class="paragraph">
<p>La différence existant entre un attribut de position auquel un type de coordonnées est associé et des attributs numériques séparés pour les directions X et Y semble réduite à première vue. La définition en tant que type de coordonnées met cependant clairement en lumière le fait que les deux informations sont liées. Cette propriété est mise à profit par des logiciels bien souvent conçus pour représenter graphiquement des cordonnées cartésiennes.</p>
</div>
<div class="paragraph">
<p>Des valeurs de coordonnées cartésiennes ? Par coordonnées cartésiennes, on désigne des coordonnées dont les dimensions sont perpendiculaires deux à deux. Ainsi, les coordonnées planimétriques précédemment définies décrivent-elle une fenêtre rectangulaire dont l&#8217;extension est d&#8217;environ 90 kilomètres selon X et 22 kilomètres selon Y. Cela signifie-t-il un retour au Moyen-Âge ? La Terre serait-elle redevenue un disque ?</p>
</div>
</div>
<div class="sect3">
<h4 id="_6_7_2"><a class="anchor" href="#_6_7_2"></a>L&#8217;enveloppe de la quetsche – Qu&#8217;est-ce qu&#8217;un système de coordonnées ?</h4>
<div class="paragraph">
<p>Pour Ptolémée, la Terre était une sphère. Les topographes (ou plus exactement les géodésiens, dès lors qu&#8217;il s&#8217;agit des aspects les plus nobles de cette discipline) ont renoncé à cette idée voilà bien longtemps déjà, parce qu&#8217;elle est bien trop simpliste.</p>
</div>
<div class="paragraph">
<p>Une approximation bien plus probante de la forme de la Terre est livrée par une figure mathématique plus complexe, un ellipsoïde, générée par la rotation d&#8217;une ellipse autour de son axe principal.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/image31.png" alt="] image:img/image32.png[">
</div>
<div class="title">Figure 2. Une ellipse en rotation autour de son axe principal donne naissance à une figure géométrique en trois dimensions que l&#8217;on appelle un ellipsoïde et qui ressemble à une sphère aplatie. Cette figure fournit une bonne approximation de la forme de la Terre.<br></div>
</div>
<div class="paragraph">
<p>(Toutes les figures de ce paragraphe et du paragraphe <a href="#_6_7_5">Coordonnées tridimensionnelles</a> sont tirées de : K. Christoph Graf, Verwendung geodätischer Abbildungen bei der Geocodierung von Satelliten-Bil­dern. Zurich, 1988. Certaines des illustrations ont été simplifiées. Veuillez donc vous reporter à cet ouvrage pour les sources originales).</p>
</div>
<div class="paragraph">
<p>Selon les régions du monde considérées, les ellipsoïdes utilisés sont positionnés de manière différente, l&#8217;approximation devenant sinon trop imprécise. La Suisse recourt par exemple au même ellipsoïde que l&#8217;Allemagne, légèrement différent de celui utilisé en Suède ou en France.</p>
</div>
<div class="paragraph">
<p>S&#8217;agissant de figures spatiales, les ellipsoïdes sont toutefois difficiles à manipuler, raison pour laquelle les géodésiens les projettent sur une surface développable telle qu&#8217;un cylindre ou un cône qu&#8217;ils amènent en tangence avec l&#8217;ellipsoïde, un peu comme s&#8217;ils éclairaient l&#8217;ellipsoïde de l&#8217;intérieur et projetaient sa surface sur le cône ou le cylindre.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/image33.png" alt="] image:img/image34.png[">
</div>
<div class="title">Figure 3. L&#8217;ellipsoïde est ceint par un cylindre (à gauche) ou un cône (à droite). Il est ensuite comme « éclairé de l&#8217;intérieur ».</div>
</div>
<div class="paragraph">
<p>Le cylindre ou le cône est ensuite développé, comme si on le découpait avec une paire de ciseaux et qu&#8217;on le déroulait à plat sur une table – et voilà, la carte est prête !</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/image35.png" alt="image35">
</div>
<div class="title">Figure 4. Une fois la projection effectuée, le cylindre (ou le cône) est développé, autrement dit découpé puis déroulé. Une surface gauche comme celle d&#8217;un ellipsoïde ou d&#8217;une sphère peut être découpée mais pas déroulée à plat, elle n&#8217;est pas développable.</div>
</div>
<div class="paragraph">
<p>La carte est enfin recouverte d&#8217;un réseau de fines lignes perpendiculaires les unes aux autres : le <strong>système de coordonnées</strong> de la carte. En conséquence, le système de coordonnées sur lequel se fonde le type de coordonnées retenu est également à indiquer.</p>
</div>
<div id="listing-06_07-02" class="listingblock">
<div class="title"><a href="#listing-06_07-02">Listing 06.07-02</a></div>
<div class="content">
<pre class="highlight"><code>Pos: COORD 480000 .. 850000.00 [m] {SysBeotie[1]},
           60000 .. 320000.00 [m] {SysBeotie[2]};</code></pre>
</div>
</div>
<div class="paragraph">
<p>La première coordonnée correspond au premier axe du système de coordonnées intitulé « SysBeotie », tandis que la seconde coordonnée correspond au second axe du même système.</p>
</div>
</div>
<div class="sect3">
<h4 id="_6_7_3"><a class="anchor" href="#_6_7_3"></a>Informations relatives au système de coordonnées – Métadonnées</h4>
<div class="paragraph">
<p>« SysBeotie » est-il un système cartésien ? Ellipsoïdique ? Comment s&#8217;appellent ses axes ? Existe-t-il des liens (tels que des projections cartographiques) vers d&#8217;autres systèmes de coordonnées ? Toutes ces informations peuvent à leur tour être décrites au moyen de données. Un modèle de données est également formulé les concernant, afin que la manière dont elles sont structurées soit claire. Un tel modèle de données est appelé un métamodèle et les données associées des métadonnés parce qu&#8217;elles ont pour fonction de décrire les données effectives.</p>
</div>
<div class="paragraph">
<p>Les données relatives à un métamodèle sont dites « méta- » englobantes en quelque sorte, mais le sens donné ici à cette désignation est différent et plus formel que lorsqu&#8217;il s&#8217;agit du prix ou de la provenance (cf. § <a href="#_3_3">[_3_3]</a>). Malheureusement, la même désignation est indistinctement utilisée dans les deux cas.</p>
</div>
<div class="paragraph">
<p>Dans les cas les plus simples, où le système de coordonnées auquel se réfèrent les coordonnées est sans ambiguïté, en raison du champ d&#8217;application et du domaine d&#8217;utilisation du modèle de données, il peut être renoncé à l&#8217;indication explicite de cette information. Il est toutefois judicieux de laisser transparaître le système de coordonnées, ne serait-ce que dans le nom du type des coordonnées.</p>
</div>
<div id="listing-06_07-03" class="listingblock">
<div class="title"><a href="#listing-06_07-03">Listing 06.07-03</a></div>
<div class="content">
<pre class="highlight"><code>CoordNational = COORD 500.00 .. 91000.00 [m],
                      700.00 .. 23000.00 [m];

Pos: CoordNational;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Les Ilinois ont préféré recourir à une définition précise pour exclure tout risque de confusion :</p>
</div>
<div id="listing-06_07-04" class="listingblock">
<div class="title"><a href="#listing-06_07-04">Listing 06.07-04</a></div>
<div class="content">
<pre class="highlight"><code>REFSYSTEM BASKET CoordSystems ~ CoordSys.CoordsysTopic
  OBJECTS OF GeoCartesian2D: SysBeotie;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Ils ont défini leur système sur la base du modèle général de systèmes de coordonnées (CoordSys). C&#8217;est pourquoi un objet de la classe GeoCartesian2D, du nom de SysBeotie, a été introduit pour la planimétrie au sein des données correspondantes. L&#8217;existence de cette entrée de données est signalée dans le modèle par OBJECTS OF, de sorte que le système de coordonnées "SysBeotie" y est ainsi disponible. Lors de l&#8217;utilisation du système, le nom de l&#8217;ensemble de métadonnées (CoordSystems) ne doit être mentionné que si plusieurs ensembles de ce type sont définis dans la partie concernée de la modélisation.</p>
</div>
<div id="listing-06_07-05" class="listingblock">
<div class="title"><a href="#listing-06_07-05">Listing 06.07-05</a></div>
<div class="content">
<pre class="highlight"><code>CoordNational = COORD 500.00 .. 91000.00 [m] {CoordSystems.SysBeotie[1]},
                      700.00 .. 23000.00 [m] {CoordSystems.SysBeotie[2]};</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_6_7_4"><a class="anchor" href="#_6_7_4"></a>Différents systèmes de coordonnées</h4>
<div class="paragraph">
<p>Les Ilinois souhaiteraient également proposer leurs coordonnées sous forme de coordonnées géographiques exprimées dans le système mondial WGS84 afin qu&#8217;un service spécifique puisse être offert aux touristes disposant d&#8217;un capteur GPS basique.</p>
</div>
<div id="listing-06_07-06" class="listingblock">
<div class="title"><a href="#listing-06_07-06">Listing 06.07-06</a></div>
<div class="content">
<pre class="highlight"><code>WGS84Coord = COORD -90.00000 .. 90.00000 [Angle_Degree] {WGS84[1]},
                   0.00000 .. 359.99999 CIRCULAR [Angle_Degree]
                   {WGS84[2]};

CLASS RemonteeMecanique =
  PosStationInf: CoordNational;
  PosStationInfWGS: WGS84Coord;
  ....
END RemonteeMecanique;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Il est cependant manifeste qu&#8217;un lien direct unit les deux attributs. Les coordonnées nationales peuvent être converties en coordonnées WGS84. La définition détaillée d&#8217;une telle conversion n&#8217;est toutefois pas du ressort de la description conceptuelle des données. Mais il est souhaitable d&#8217;indiquer que ces coordonnées peuvent être déduites les unes des autres par voie de calcul.</p>
</div>
<div id="listing-06_07-07" class="listingblock">
<div class="title"><a href="#listing-06_07-07">Listing 06.07-07</a></div>
<div class="content">
<pre class="highlight"><code>!! Conversion de coordonnees du systeme national beotien en WGS84.
!! Les fonctions sont abordees au paragraphe 7.2.
FUNCTION BeotieVersWGS84 (Bo: Beotie.CoordNational): WGS84Coord;

CLASS RemonteeMecanique =
  PosStationInf: Beotie.CoordNational;
  WGSStationInferieure: WGS84Coord := BeotieVersWGS84 (PosStationInf);
  ....
END RemonteeMecanique;</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_6_7_5"><a class="anchor" href="#_6_7_5"></a>Coordonnées tridimensionnelles</h4>
<div class="paragraph">
<p>Il va de soi que les skieurs et les randonneurs évoluant autour de la Dent d&#8217;Ili ne peuvent se satisfaire de coordonnées planimétriques. Si le coeur des skieurs se met à battre la chamade dès lors qu&#8217;on leur annonce de fortes dénivelées, une sourde angoisse étreint celui des randonneurs, la sueur leur perle sur le front et leurs genoux se dérobent soudain sous eux. Qu&#8217;elles soient synonymes de bonnes ou de mauvaises nouvelles, tout le monde veut connaître les altitudes ! En conséquence, les types de cordonnées peuvent également présenter trois dimensions.</p>
</div>
<div id="listing-06_07-08" class="listingblock">
<div class="title"><a href="#listing-06_07-08">Listing 06.07-08</a></div>
<div class="content">
<pre class="highlight"><code>CoordNational3 = COORD 500.00 .. 91000.00 [m] {SysBeotie[1]},
                       700.00 .. 23000.00 [m] {SysBeotie[2]},
                       0.00 .. 9000.00 [m] {SysBeotieAlt[1]};

WGS84Coord = COORD -90.00000 .. 90.00000 [Angle_Degree] {WGS84[1]},
                   0.00000 .. 359.99999 CIRCULAR [Angle_Degree]
                   {WGS84[2]},
                   -2000.00 .. 9000.00 [m] {WGS84A[1]};</code></pre>
</div>
</div>
<div class="paragraph">
<p>Les altitudes posent en outre un problème particulier : où se trouve l&#8217;altitude 0 ? Et comment déterminer l&#8217;altitude d&#8217;un point par rapport à cette cote 0 ? Les géodésiens établissent une distinction fondamentale entre les altitudes rapportées au champ de pesanteur terrestre (altitudes dites orthométriques ; l&#8217;altitude 0 peut être assimilée au niveau moyen des mers prolongé sous les continents) et celles rapportées à la figure géométrique modélisant la forme de la Terre, l&#8217;ellipsoïde (altitude ellipsoïdique ; l&#8217;altitude 0 correspond à la surface de l&#8217;ellipsoïde).</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/image36.png" alt="image36">
</div>
<div class="title">Figure 5. Le champ de pesanteur terrestre : le niveau moyen des mers est prolongé sous les continents dans le cas du géoïde. Les massifs montagneux, les fosses marines, etc. in­fluencent le champ de pesanteur et déforment ainsi la surface de référence imaginée. L&#8217;échelle altimétrique est fortement amplifiée sur la représentation.</div>
</div>
<div class="imageblock">
<div class="content">
<img src="img/image37.png" alt="image37">
</div>
<div class="title">Figure 6. L&#8217;altitude associée au point Q varie en fonction du système de référence considéré.</div>
</div>
<div class="paragraph">
<p>D&#8217;ordinaire, les systèmes de coordonnées nationaux utilisent des altitudes orthométriques. Ainsi, la troisième dimension des coordonnées nationales ne se rapporte-t-elle pas simplement au troisième axe du système national, mais au premier axe d&#8217;un système altimétrique particulier.</p>
</div>
<div class="paragraph">
<p>En revanche, la détermination des coordonnées repose uniquement sur la géométrie de la position des satellites dans le cas d&#8217;observations GPS, sans que le champ de pesanteur terrestre vienne jouer le moindre rôle. Les altitudes WGS84 sont donc des altitudes ellipsoïdiques.</p>
</div>
<div class="paragraph">
<p>image::img/image38.png[]<br>
.L&#8217;écart entre altitude orthométrique et altitude ellipsoïdique peut atteindre plusieurs mètres. Les représentations graphiques ci-dessus indiquent les différences enregistrées par rapport à l&#8217;ellipsoïde usuel en Suisse, en France et dans l&#8217;ouest de l&#8217;Allemagne.
image::img/image39.png[] <span class="image"><img src="img/image40.png" alt="image40"></span></p>
</div>
<div class="paragraph">
<p>La conversion entre altitudes orthométriques et altitudes ellipsoïdiques peut poser problème dans des zones où le champ de pesanteur terrestre perd son homogénéité. Mais ces questions sont de peu d&#8217;importance au stade de la modélisation, ce qui ne signifie pas pour autant qu&#8217;il faille les en exclure totalement.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_6_8"><a class="anchor" href="#_6_8"></a>Le 0 est-il plein nord ? – Définitions relatives aux angles et aux directions</h3>
<div class="paragraph">
<p>Comment exprimer un angle droit ? Par 90 degrés ou par pi / 2 ? Il ne s&#8217;agit que d&#8217;une question d&#8217;unité. Mais quand un angle est-il considéré comme étant positif et quand comme étant négatif ? Le sens de rotation (horaire ou anti-horaire) fait par conséquent partie de la définition d&#8217;un type d&#8217;angle.</p>
</div>
<div id="listing-06_08-01" class="listingblock">
<div class="title"><a href="#listing-06_08-01">Listing 06.08-01</a></div>
<div class="content">
<pre class="highlight"><code>DOMAIN
  AngleDansLeSensHoraire = -179 .. 180 CIRCULAR CLOCKWISE;
  AngleDansLeSensAnti-horaire = -179 .. 180 CIRCULAR COUNTERCLOCKWISE;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Lorsque nous nous trouvons au sommet de la Dent d&#8217;Ili, nous aimerions bien savoir dans quelle direction chercher la Dent Cambrée. A 50 degrés ? A 40 degrés ? Ou plutôt à 310 ?</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/image41.png" alt="image41">
</div>
<div class="title">Figure 7. Quiconque se donne la peine de monter au sommet de la Dent d&#8217;Ili est récompensé de ses efforts par la vue exceptionnelle qui s&#8217;offre alors à lui. Mais dans quelle direction peut-on contempler la Dent Cambrée ? Si le système de coordonnés de référence n&#8217;est pas clairement indiqué dans la question, aucune réponse ne peut lui être apportée.</div>
</div>
<div class="paragraph">
<p>En effet, tout dépend de la direction origine et du sens de rotation des directions. Autrement dit, lorsqu&#8217;il est question de directions, il doit toujours être question également de systèmes de référence. Les directions sont par conséquent étroitement liées aux types de coordonnées. Il est par ailleurs parfaitement logique de déterminer à la fois la distance et la direction séparant deux points définis par leurs coordonnées.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/image42.png" alt="image42">
</div>
<div class="title">Figure 8. L&#8217;indication des axes et du sens de rotation fait partie intégrante de la définition d&#8217;un système de coordonnées.</div>
</div>
<div id="listing-06_08-02" class="listingblock">
<div class="title"><a href="#listing-06_08-02">Listing 06.08-02</a></div>
<div class="content">
<pre class="highlight"><code>CoordNational3 = COORD 500.00 .. 91000.00 [m] {SysBeotie[1]},
                       700.00 .. 23000.00 [m] {SysBeotie[2]},
                       -200.00 .. 14000.00 [m] {SysBeotieAlt[1]},
                       ROTATION 2 -&gt; 1;

Direction = 0.0 .. 359.9 CIRCULAR [Angle_Degre] {SysBeotie};</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_6_9"><a class="anchor" href="#_6_9"></a>Une piste est-elle une ligne ou une surface ? – Types géométriques</h3>
<div class="sect3">
<h4 id="_6_9_1"><a class="anchor" href="#_6_9_1"></a>Vue conceptuelle simple d&#8217;une ligne</h4>
<div class="paragraph">
<p>Du point de vue du skieur, les besoins sont clairs : il veut savoir où commence la piste, où elle s&#8217;arrête et avoir une idée sommaire de son tracé. Et puis aussi s&#8217;il y a une auberge en bord de piste et si celle-ci sillonne à travers bois ou descend sur des versants découverts. Il suffit, pour toutes ces informations, de décrire le tracé de la piste sous forme de ligne.</p>
</div>
<div class="paragraph">
<p>Par type de ligne, on entend d&#8217;abord ce que l&#8217;expression laisse explicitement supposer : une liaison plus ou moins compliquée entre deux points.</p>
</div>
<div class="paragraph">
<p>Pris dans ce sens, le type de ligne n&#8217;est rien d&#8217;autre qu&#8217;un type numérique ou mieux encore, un type de coordonnées. Les points composant la ligne devant être décrits par des coordonnées, il est indispensable qu&#8217;un type de ligne soit toujours lié à un type de coordonnées.</p>
</div>
<div class="paragraph">
<p>Avec INTERLIS, ou pourrait écrire :</p>
</div>
<div id="listing-06_09-01" class="listingblock">
<div class="title"><a href="#listing-06_09-01">Listing 06.09-01</a></div>
<div class="content">
<pre class="highlight"><code>LigneBeotie = POLYLINE VERTEX Beotie.CoordNational;

CLASS Piste =
  Trace: LigneBeotie;
END Piste;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Le tracé de la piste est décrit au moyen de lignes basées sur des coordonnées exprimées dans le système national béotien. En conséquence, les points d&#8217;appui des lignes dans le système national béotien prennent appui sur le type de coordonnées du système national.</p>
</div>
</div>
<div class="sect3">
<h4 id="_6_9_2"><a class="anchor" href="#_6_9_2"></a>Tronçons de lignes</h4>
<div class="paragraph">
<p>Il est évident que la piste reliant la Dent d&#8217;Ili à Ia Crête d&#8217;Ili est une ligne complexe. En revanche, le tracé des pistes à proximité des tire-fesses est relativement simple. Sont-elles toutes descriptibles par le même type ? La solution réside dans la subdivision de la ligne considérée comme un tout en plusieurs tronçons de ligne. Chacun de ceux-ci présente lui-même une géométrie simple (telle qu&#8217;un segment de droite ou un arc de cercle) et est consécutif au tronçon qui le précède.</p>
</div>
<div class="paragraph">
<p>Cette situation pourrait également être décrite dans le modèle conceptuel, mais cela constituerait une contrainte superflue. Une fois que l&#8217;on sait que les lignes sont toujours structurées de la sorte, il n&#8217;est plus nécessaire d&#8217;y revenir.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/image43.png" alt="image43">
</div>
<div class="title">Figure 9. Le tracé d&#8217;une piste est représenté par une ligne, elle-même constituée de tronçons de diverses sortes : des segments de droite, des arcs de cercle, etc.</div>
</div>
<div class="paragraph">
<p>Il est toutefois judicieux d&#8217;indiquer les types de tronçons de lignes autorisés pour un type de ligne particulier :</p>
</div>
<div id="listing-06_09-02" class="listingblock">
<div class="title"><a href="#listing-06_09-02">Listing 06.09-02</a></div>
<div class="content">
<pre class="highlight"><code>LigneBeotie = POLYLINE WITH (STRAIGHTS, ARCS) VERTEX Beotie.CoordNational;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Cette définition INTERLIS 2 précise que les lignes du type indiqué peuvent comprendre des segments de droite et des arcs de cercles.</p>
</div>
<div class="paragraph">
<p>Dans de nombreux cas – dont les pistes font partie – il ne présente aucun intérêt de permettre aux lignes d&#8217;être en intersection avec elles-mêmes. Les restrictions de cette nature font aussi partie du modèle conceptuel. En raison d&#8217;imprécisions inhérentes aux travaux de mensuration (ou parfois aux calculs qui s&#8217;ensuivent), il est cependant possible qu&#8217;une forme en principe exempte de tout recouvrement présente subitement l&#8217;un ou l&#8217;autre léger chevauchement. C&#8217;est pourquoi le recouvrement maximal encore admissible fait partie intégrante du modèle. Il est indiqué dans les unités des coordonnées associées.</p>
</div>
<div class="paragraph">
<p>Le système de coordonnées national béotien utilisant le mètre comme unité, la définition ci-dessous permet des recouvrements n&#8217;excédant pas 2 centimètres :</p>
</div>
<div id="listing-06_09-03" class="listingblock">
<div class="title"><a href="#listing-06_09-03">Listing 06.09-03</a></div>
<div class="content">
<pre class="highlight"><code>LigneBeotie = POLYLINE WITH (STRAIGHTS, ARCS)
              VERTEX Beotie.CoordNational
              WITHOUT OVERLAPS &gt; 0.02;</code></pre>
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="img/image44.png" alt="image44">
</div>
<div class="title">Figure 10. De petits recoupements sont parfois inévitables. La définition de la taille maximale d&#8217;un tel recouvrement (la flèche sur le graphique) fait partie intégrante du modèle.</div>
</div>
</div>
<div class="sect3">
<h4 id="_6_9_3"><a class="anchor" href="#_6_9_3"></a>Lignes orientées</h4>
<div class="paragraph">
<p>Un skieur s&#8217;attend naturellement à ce que les tronçons de ligne de la piste reliant la Dent d&#8217;Ili à la Crête d&#8217;Ili commencent aux abords de la Dent d&#8217;Ili pour finir sur la Crête d&#8217;Ili. Ils souhaitent descendre la piste et non chausser les peaux de phoque pour la remonter ! La direction présente cependant peu d&#8217;intérêt pour la description d&#8217;autres objets (tels que des sentiers de randonnée). Lorsque la direction des lignes est d&#8217;importance, elle doit donc figurer dans le modèle conceptuel.</p>
</div>
<div id="listing-06_09-04" class="listingblock">
<div class="title"><a href="#listing-06_09-04">Listing 06.09-04</a></div>
<div class="content">
<pre class="highlight"><code>LigneBeotieOrientee = DIRECTED POLYLINE VERTEX Beotie.CoordNational;

CLASS Piste =
  Trace: LigneBeotieOrientee;
END Piste;</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_6_9_4"><a class="anchor" href="#_6_9_4"></a>Surfaces</h4>
<div class="paragraph">
<p>Le service des pistes des Remontées mécaniques de la Dent d&#8217;Ili s&#8217;est demandé si la description des pistes répondait à ses besoins. Après réflexion, il a conclu qu&#8217;une représentation sous forme de surface était préférable afin que la définition des secteurs à préparer soit toujours parfaitement claire.</p>
</div>
<div id="listing-06_09-05" class="listingblock">
<div class="title"><a href="#listing-06_09-05">Listing 06.09-05</a></div>
<div class="content">
<pre class="highlight"><code>DOMAIN
  LigneBeotieOrientee = DIRECTED POLYLINE WITH (STRAIGHTS, ARCS)
                        VERTEX Beotie.CoordNational;

  SurfaceBeotie = SURFACE WITH (STRAIGHTS, ARCS)
                  VERTEX Beotie.CoordNational;

CLASS Piste =
  Trace: LigneBeotieOrientee;
  Preparee: SurfaceBeotie;
END Piste;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Un peu avant l&#8217;arrivée sur la Crête d&#8217;Ili, un grand arbre occupe le milieu de la piste – ou, formulé différemment, la piste contourne l&#8217;arbre par la gauche et la droite.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/image45.png" alt="image45">
</div>
<div class="title">Figure 11. Un grand arbre occupe le milieu de la piste. La situation peut être source d&#8217;angoisse pour les skieurs, mais ne trouble absolument pas le modèle de données : la piste est une seule et même surface, malgré l&#8217;enclave.</div>
</div>
<div class="paragraph">
<p>La surface à préparer est-elle encore une surface unique ? Par surfaces, on entend toujours – au moins au sens d&#8217;INTERLIS – des zones d&#8217;un seul tenant. Et même si elles comportent des vides ou des enclaves, elles restent des zones d&#8217;un seul tenant et peuvent par conséquent être décrites comme des surfaces.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Une surface présente un <strong>contour extérieur</strong> et un seul. Elle peut en revanche ne présenter aucun <strong>contour intérieur</strong> (enclave) comme elle peut en présenter un ou même plusieurs.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Au sommet, sous la Dent d&#8217;Ili, différentes pistes débutent si près les unes des autres qu&#8217;il en résulte une seule et même surface préparée. Quelle portion de surface faut-il alors attribuer à quelle piste ? Deux pistes se croisent dans le Vallon d&#8217;Ili. La surface correspondante est donc saisie deux fois. Et cela gêne bien évidemment l&#8217;estimation du temps nécessaire à la préparation des pistes.</p>
</div>
<div class="paragraph">
<p>En conséquence, le service des pistes a opté pour une autre modélisation : les surfaces à préparer ne sont pas directement affectées aux pistes mais sont gérées comme des tronçons de pistes indépendants. Chacun de ces tronçons de pistes est une surface mais aucun recouvrement ne doit être permis entre tronçons, puisqu&#8217;une portion de terrain ne doit être préparée qu&#8217;une seule fois.</p>
</div>
<div id="listing-06_09-06" class="listingblock">
<div class="title"><a href="#listing-06_09-06">Listing 06.09-06</a></div>
<div class="content">
<pre class="highlight"><code>DOMAIN
  PartitionTerritoireBeotie = AREA WITH (STRAIGHTS, ARCS)
                              VERTEX Beotie.CoordNational;

CLASS EtatPiste =
  SurfacePreparee: PartitionTerritoireBeotie;
END EtatPiste;</code></pre>
</div>
</div>
<div class="paragraph">
<p>De telles surfaces exemptes de tout recouvrement étant relativement fréquentes, un type spécifique (intitulé AREA, soit aire) a été introduit dans INTERLIS. On ne parle alors plus de surfaces mais de partitions de territoires.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/image46.png" alt="] image:img/image47.png[">
</div>
<div class="title">Figure 12. Dans le cas du type de surface ordinaire (SURFACE, à gauche), les surfaces de différents objets peuvent se chevaucher. Rien ne s&#8217;oppose par exemple, à ce que la même portion de terrain appartienne simultanément à deux pistes de ski. Il est en revanche exigé, dans le cas d&#8217;une partition du territoire (AREA, à droite), que chacun des points du terrain soit affecté sans la moindre équivoque à un objet s&#8217;il n&#8217;appartient pas à la surface résiduelle (représentée en noir). Les portions de terrain préparées par le service des pistes en constituent un exemple.</div>
</div>
</div>
<div class="sect3">
<h4 id="_6_9_5"><a class="anchor" href="#_6_9_5"></a>Types de lignes tridimensionnels</h4>
<div class="paragraph">
<p>Si le type de coordonnées associé à la définition d&#8217;une ligne est de nature tridimensionnelle, le type de ligne sera lui aussi tridimensionnel. INTERLIS 2 renonce dans ce contexte à gérer la troisième dimension avec les mêmes droits que les deux premières, car les trois dimensions peuvent toujours être subdivisées en deux composantes, la planimétrie et l&#8217;altimétrie, dans les applications géographiques.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
INTERLIS 2 accepte des lignes à 2.5 dimensions.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>On suppose en fait que chaque point d&#8217;appui (point séparant deux tronçons de lignes) est défini en planimétrie et en altimétrie et que l&#8217;altitude d&#8217;un point du tronçon de ligne est interpolée à partir de ses points d&#8217;appui, en fonction de la distance le séparant du point de départ du tronçon.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/image48.png" alt="image48">
</div>
<div class="title">Figure 13. INTERLIS accepte des lignes à 2.5 dimensions : l&#8217;altitude entre deux points d&#8217;appui fait toujours l&#8217;objet d&#8217;une interpolation linéaire. A l&#8217;endroit où un quart du tronçon C – D (en projection sur le plan) est parcouru, un quart de la dénivelée entre ces deux points a également été vaincu.</div>
</div>
<div class="paragraph">
<p>Ne faudrait-il pas alors modéliser le tracé de la piste au moyen d&#8217;un type de ligne à trois dimensions ? D&#8217;un point de vue purement technique, cela ne poserait manifestement aucun problème et il faut bien reconnaître que l&#8217;altitude joue un rôle prépondérant dans le domaine du ski. L&#8217;inconvénient, en revanche, est que l&#8217;altitude du tracé de la piste n&#8217;est pas une grandeur indépendante : si l&#8217;on connaît sa position en planimétrie, l&#8217;altitude se déduit de la forme du terrain. L&#8217;altitude du tracé peut par conséquent se calculer à partir des positions en planimétrie et d&#8217;un modèle du terrain. D&#8217;un point de vue conceptuel, il est donc préférable de renoncer à la composante altimétrique pour le tracé de la piste.</p>
</div>
<div class="paragraph">
<p>Il peut toutefois en aller autrement de routes ou de voies ferrées, puisque l&#8217;altitude du tracé ne correspond pas à celle du terrain dans le cas de ponts ou de tunnels. De plus, une telle précision est exigée pour les altitudes qu&#8217;une déduction à partir du modèle de terrain ne peut même pas être envisagée dans ce contexte. Dans certains cas, il peut se révéler judicieux de modéliser les ouvrages d&#8217;art (avec leurs altitudes) indépendamment du tracé. Le tracé altimétrique effectif est alors calculé à partir du modèle aux abords des ouvrages d&#8217;art et il est fait appel au modèle de terrain ailleurs.</p>
</div>
<div class="paragraph">
<p>Le volume de travail requis par la saisie et la mise à jour devrait constituer un critère de poids pour la prise de cette décision.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_6_10"><a class="anchor" href="#_6_10"></a>Comment le vent souffle-t-il ? – Structures</h3>
<div class="sect3">
<h4 id="_6_10_1"><a class="anchor" href="#_6_10_1"></a>Propriétés multiples</h4>
<div class="paragraph">
<p>Peu avant la Crête d&#8217;Ili, les personnes assises sur le télésiège se mettent soudain à se couvrir les oreilles et à remonter leur col : le vent est vraiment cinglant ici. Dans le cas du vent, il importe non seulement de connaître sa vitesse mais également la direction dans laquelle il souffle. Si l&#8217;on se contente de réunir ces deux propriétés avec d&#8217;autres attributs dans le cadre d&#8217;une description de classe, elles perdent de leur vigueur.</p>
</div>
<div id="listing-06_10-01" class="listingblock">
<div class="title"><a href="#listing-06_10-01">Listing 06.10-01</a></div>
<div class="content">
<pre class="highlight"><code>CLASS Temps =
  Temperature: MANDATORY -50 .. 50 [oC];
  DirectionVent: MANDATORY (N, NE, E, SE, S, SW, W, NW) CIRCULAR;
  VitesseVent: MANDATORY 0 .. 200 [kmh];
END Temps;</code></pre>
</div>
</div>
<div class="paragraph">
<p>En conséquence, lorsqu&#8217;une situation n&#8217;est pas décrite par une seule valeur mais par plusieurs, il est judicieux de définir une structure (InfoVent) englobant ces propriétés (direction du vent, vitesse du vent).</p>
</div>
<div id="listing-06_10-02" class="listingblock">
<div class="title"><a href="#listing-06_10-02">Listing 06.10-02</a></div>
<div class="content">
<pre class="highlight"><code>STRUCTURE InfoVent =
  DirectionVent: MANDATORY (N, NE, E, SE, S, SW, W, NW) CIRCULAR;
  VitesseVent: MANDATORY 0 .. 200 [kmh];
END InfoVent;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Notions apparentées aux structures : types de données, types de données structurés, &#8230;&#8203;</p>
</div>
<div class="paragraph">
<p>Cette structure peut être utilisée partout où un avis concernant le vent est émis.</p>
</div>
<div id="listing-06_10-03" class="listingblock">
<div class="title"><a href="#listing-06_10-03">Listing 06.10-03</a></div>
<div class="content">
<pre class="highlight"><code>CLASS Temps =
  Temperature: MANDATORY -50 .. 50 [oC];
  Vent: InfoVent;
END Temps;

CLASS Anemometre =
  Lieu: MANDATORY CoordNational;
  Vent: InfoVent;
END Anemometre;</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_6_10_2"><a class="anchor" href="#_6_10_2"></a>Plusieurs éléments structurés</h4>
<div class="paragraph">
<p>L&#8217;anémomètre de la Crête d&#8217;ili est un peu particulier : il n&#8217;indique pas uniquement la valeur actuelle mais présente aussi les six dernières valeurs mesurées. Les gens n&#8217;en sont pas réchauffés pour autant mais sont généralement surpris de constater la vitesse à laquelle les changements peuvent se produire.</p>
</div>
<div id="listing-06_10-04" class="listingblock">
<div class="title"><a href="#listing-06_10-04">Listing 06.10-04</a></div>
<div class="content">
<pre class="highlight"><code>CLASS Anemometre =
  Lieu: MANDATORY CoordNational;
  Vent: LIST {6} OF InfoVent;
END Anemometre;</code></pre>
</div>
</div>
<div class="paragraph">
<p>L&#8217;attribut Vent englobe donc six éléments (valeurs de mesure incluant à chaque fois la direction et la vitesse du vent). Il est indiqué par LIST OF que l&#8217;ordre de succession a son importance (par exemple la valeur la plus récente en tête). Si l&#8217;ordre de succession était sans importance, on écrirait BAG OF. Le nombre d&#8217;éléments mimal et maximal qu&#8217;il est possible d&#8217;énumérer peut être précisé, comme dans le cas des relations.</p>
</div>
</div>
<div class="sect3">
<h4 id="_6_10_3"><a class="anchor" href="#_6_10_3"></a>Structures et classes</h4>
<div class="paragraph">
<p>Du point de vue formel, les structures et les classes (d&#8217;objets) sont très similaires. Des différences considérables existent cependant en pratique. Une classe (société de remontées mécaniques, anémomètre) décrit la manière dont les objets sont constitués tandis qu&#8217;une structure décrit la manière dont des propriétés plus complexes d&#8217;objets (InfoVent) sont constituées. Une structure sert donc au même but qu&#8217;un domaine de valeurs : décrire la manière dont un attribut est constitué. Parfois, une structure n&#8217;est requise que lorsque la propriété considérée doit être décrite de façon plus détaillée alors que la seule indication d&#8217;un domaine de valeurs suffit dans le cas d&#8217;une description plus simple (cf. § <a href="#_6_12">A l&#8217;heure ilinoise – Modélisation du temps</a>).</p>
</div>
<div class="paragraph">
<p>Les instances de classes sont des objets autonomes (Remontées mécaniques de la Dent d&#8217;Ili, anémomètre de la Crête d&#8217;Ili). Les instances de structures sont des éléments structurés (vent de 180 km/h soufflant du NE). La valeur d&#8217;un attribut de structure peut se limiter à un seul élément structuré ou en englober tout un ensemble (BAG OF, LIST OF).</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Une <strong>structure</strong> est très proche d&#8217;une classe d&#8217;objets sur le plan formel et d&#8217;un domaine de valeurs sur le plan pratique. Les exemplaires correspondants, les <strong>éléments structurés</strong>, ne possèdent cependant pas d&#8217;identité propre, ce sont des valeurs d&#8217;attributs d&#8217;un objet.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Les objets peuvent être en relation les uns avec les autres (cf. § <a href="#_6_13">Zones tarifaires, messages d&#8217;état – Relations</a>). Les valeurs (de domaines de valeurs ou de structures) ne le peuvent pas. Il est toutefois possible de comparer entre elles des valeurs semblables d&#8217;objets différents (et de classes différentes) et les mettre ainsi en relation (cf. § <a href="#_6_17">Les zones tarifaires ne suscitent guère d&#8217;intérêt – Vues</a>). On pourrait donc comparer le prix du forfait du randonneur avec celui du steak du bûcheron que l&#8217;on mangerait de bon coeur au restaurant de la Crête d&#8217;Ili le jour de cette randonnée pédestre. Il n&#8217;en existe pas pour autant de relation entre le forfait du randonneur et le steak du bûcheron.</p>
</div>
<div class="paragraph">
<p>Il est nécessaire, dans certains cas, de renvoyer vers un autre objet pour la description d&#8217;une propriété (cf. § <a href="#_6_11_3">Les éléments structurés peuvent renvoyer à des objets</a>). Un renvoi vers une valeur ou un élément structuré est impossible puisqu&#8217;ils sont dépourvus d&#8217;identité.</p>
</div>
</div>
<div class="sect3">
<h4 id="_6_10_4"><a class="anchor" href="#_6_10_4"></a>Les lignes sont des structures spécifiques</h4>
<div class="paragraph">
<p>L&#8217;attribut du tracé de la piste (cf. § <a href="#_6_9_1">Vue conceptuelle simple d&#8217;une ligne</a>) est défini comme LigneBeotie, laquelle est à son tour définie comme une polyligne (POLYLINE). Une polyligne peut être comprise comme un ensemble de tronçons de lignes (cf. § <a href="#_6_9_2">Tronçons de lignes</a>). La définition en tant que polyligne n&#8217;est en fait qu&#8217;une notation abrégée pour un ensemble ordonné de structures, les éléments structurés correspondant à une définition spécifique :</p>
</div>
<div id="listing-06_10-05" class="listingblock">
<div class="title"><a href="#listing-06_10-05">Listing 06.10-05</a></div>
<div class="content">
<pre class="highlight"><code>STRUCTURE SegmentBeotie (ABSTRACT) =
  SegmentEndPoint: MANDATORY Beotie.CoordNational;
END SegmentBeotie;

STRUCTURE StartSegmentBeotie EXTENDS SegmentBeotie (FINAL) =
END SegmentBeotie;

STRUCTURE StraightSegmentBeotie EXTENDS SegmentBeotie (FINAL) =
END StraightSegmentBeotie;

STRUCTURE ArcSegmentBeotie EXTENDS SegmentBeotie (FINAL) =
  ArcPoint: MANDATORY Beotie.CoordNational;
  Rayon: Length;
END ArcSegmentBeotie;

CLASS Piste =
  Trace: LIST {2..*} OF SegmentBeotie;
END Piste;</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_6_11"><a class="anchor" href="#_6_11"></a>Comment s&#8217;exprime-t-on dans le Val d&#8217;Ili ? – Multilinguisme</h3>
<div class="sect3">
<h4 id="_6_11_1"><a class="anchor" href="#_6_11_1"></a>Un attribut par langue</h4>
<div class="paragraph">
<p>Dans le modèle actuel, un nom et un nom abrégé sont associés à une société de remontées mécaniques. Comment intégrer alors le fait qu&#8217;en allemand, les Remontées mécaniques de la Dent d&#8217;Ili (RDI) se transforment en <em>Ilishornbahnen (IhB)</em> ?</p>
</div>
<div class="paragraph">
<p>Il est tentant de vouloir étendre la classe d&#8217;objets des sociétés de remontées mécaniques pour y ajouter le nom allemand et le nom abrégé qui lui est associé :</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/image49.png" alt="image49">
</div>
<div class="title">Figure 14. La classe d&#8217;objets des sociétés de remontées mécaniques avec le nom et le nom abrégé qui lui sont associés, en français et en allemand.</div>
</div>
<div class="paragraph">
<p>Le problème serait alors réglé. Mais que se passerait-il alors si un beau jour, on désirait saisir le nom et le nom abrégé associé dans une troisième, une quatrième voire une cinquième langue ? Pas grand chose, en fait – il ne s&#8217;agit jamais que d&#8217;une petite modification du modèle de données !</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<div class="title">Warning</div>
</td>
<td class="content">
Il est effectivement très facile d&#8217;agrandir une case sur le papier et d&#8217;y rajouter quelques lignes supplémentaires. Cependant, une fois le système informatique mis en place, une petite modification de cette nature peut très bien causer plus de travail qu&#8217;il n&#8217;y paraît : les formulaires de saisie sont à revoir, les logiciels à adapter, les données à saisir une nouvelle fois, etc.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_6_11_2"><a class="anchor" href="#_6_11_2"></a>Désignations liées à une langue en tant qu&#8217;éléments structurés</h4>
<div class="paragraph">
<p>Il vaut donc mieux que la langue effective n&#8217;apparaisse pas dans le modèle de données. Dans la nouvelle version suivante, un ensemble de désignations est affecté à une société de remontées mécaniques. La capacité à gérer plusieurs langues étant une demande fréquemment exprimée, la structure DesignationEntreprise hérite de la structure de base Designation qui englobe la langue et un texte.</p>
</div>
<div id="listing-06_11-01" class="listingblock">
<div class="title"><a href="#listing-06_11-01">Listing 06.11-01</a></div>
<div class="content">
<pre class="highlight"><code>STRUCTURE Designation =
  Nom: TEXT;
  Langue: TEXT*2;
END Designation;

STRUCTURE DesignationEntreprise EXTENDS Designation =
  Nom(EXTENDED): TEXT*100;
  NomAbrege: TEXT*10;
END DesignationEntreprise;

CLASS SocieteRemonteesMecaniques =
  Noms: BAG {1..*} OF DesignationEntreprise;
END SocieteRemonteesMecaniques;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Ou sous la forme d&#8217;un diagramme :</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/image50.png" alt="image50">
</div>
<div class="title">Figure 15. Plusieurs désignations sont affectées à une société de remontées mécaniques. Une entreprise pouvant posséder plusieurs noms, il est aisément possible d&#8217;enregistrer de nouveaux noms dans d&#8217;autres langues. Les détails de l&#8217;affectation (les informations telles que 1..* ou le rectangle plein) seront abordés ultérieurement dans le contexte des relations.</div>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<div class="title">Warning</div>
</td>
<td class="content">
Notez toutefois que tout attribut textuel n&#8217;a pas nécessairement vocation à être multilingue. Les noms de famille des personnes ne sont par exemple pas traduits.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Seules de nouvelles données sont à saisir pour ajouter des désignations dans une autre langue. Aucune adaptation du modèle de données n&#8217;est requise dans ce cadre.</p>
</div>
</div>
<div class="sect3">
<h4 id="_6_11_3"><a class="anchor" href="#_6_11_3"></a>Les éléments structurés peuvent renvoyer à des objets</h4>
<div class="paragraph">
<p>Qui sait que l&#8217;abréviation officielle du romanche est rm ? Du point de vue de l&#8217;Association nationale, les langues entrant en ligne de compte pour la désignation des sociétés de remontées mécaniques sont clairement identifiées. Seul un nom abrégé est d&#8217;ordinaire à prendre en compte lors de la saisie d&#8217;une entreprise. On peut s&#8217;en souvenir aisément, raison pour laquelle l&#8217;Association nationale des offices de tourisme a bâti son modèle dans le respect de la description précédente.</p>
</div>
<div class="paragraph">
<p>Si tel n&#8217;avait pas été le cas, on aurait sans doute opté pour un modèle dans lequel les langues sont des objets de plein droit. L&#8217;objet linguistique aurait ainsi contenu l&#8217;abréviation et par exemple le nom sous forme textuelle, dans la langue elle-même et en anglais.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/image51.png" alt="image51">
</div>
<div class="title">Figure 16. Dans cette variante, la désignation de la langue (une structure) renvoie à la langue (une classe d&#8217;objets normale).</div>
</div>
<div class="paragraph">
<p>La désignation renvoie ainsi à la langue. Ce renvoi n&#8217;en constitue pas pour autant une relation de plein droit (cf. § <a href="#_6_13">Zones tarifaires, messages d&#8217;état – Relations</a>), les désignations ne possédant pas d&#8217;identité propre. Du point de vue de l&#8217;objet linguistique, il n&#8217;existe donc pas non plus d&#8217;accès direct aux éléments de désignation, lequel devrait être établi par l&#8217;intermédiaire d&#8217;une vue (cf. § <a href="#_6_17">Les zones tarifaires ne suscitent guère d&#8217;intérêt – Vues</a>).</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_6_12"><a class="anchor" href="#_6_12"></a>A l&#8217;heure ilinoise – Modélisation du temps</h3>
<div class="sect3">
<h4 id="_6_12_1"><a class="anchor" href="#_6_12_1"></a>Une solution simple, convenant aux exigences modestes</h4>
<div class="paragraph">
<p>L&#8217;Association nationale a prévu une solution simple, fondée sur un attribut pour la durée de validité des types de billets, basé sur le nombre de jours (avec un chiffre après la virgule).</p>
</div>
<div id="listing-06_12-01" class="listingblock">
<div class="title"><a href="#listing-06_12-01">Listing 06.12-01</a></div>
<div class="content">
<pre class="highlight"><code>DureeValidite : 0.0 .. 1000.0 [d];</code></pre>
</div>
</div>
<div class="paragraph">
<p>Différentes questions se posent toutefois si l&#8217;on regarde les choses d&#8217;un peu plus près, comme les Ilinois comptent bien le faire :</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Un billet valable le jour de son émission n&#8217;a pas la même durée de validité qu&#8217;un billet valable durant 24 heures.</p>
</li>
<li>
<p>Les mois ne sont pas tous de durée égale (28, 29, 30 ou 31 jours, suivant les cas).</p>
</li>
<li>
<p>Les années peuvent compter 365 ou 366 jours.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>A ces questions posées par les Ilinois, l&#8217;Association nationale a apporté les réponses suivantes :</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Durée de validité d&#8217;un billet émis le jour de son utilisation : 0.9 jour ;</p>
</li>
<li>
<p>Durée d&#8217;un mois : 30.0 jours ;</p>
</li>
<li>
<p>Durée d&#8217;une année : 365.0 jours.</p>
</li>
</ul>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<div class="title">Warning</div>
</td>
<td class="content">
Il peut être tentant de recourir à ce genre d&#8217;expédients qui semblent simples au premier abord. Mais qu&#8217;en est-il si par 30.0 jours, on entend vraiment ce nombre de jours et ne sous-entend pas qu&#8217;il s&#8217;agit d&#8217;un mois ? La prudence est donc de mise !
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>A quoi pourrait alors ressembler une meilleure solution ?</p>
</div>
</div>
<div class="sect3">
<h4 id="_6_12_2"><a class="anchor" href="#_6_12_2"></a>La durée en tant que structure</h4>
<div class="paragraph">
<p>Des propriétés d&#8217;objets telles que la durée de validité ne peuvent pas toujours être décrites avec une précision suffisante par une valeur unique. Un groupe d&#8217;attributs est parfois requis et il peut même être judicieux de prévoir des extensions. La structure sert à cela.</p>
</div>
<div id="listing-06_12-02" class="listingblock">
<div class="title"><a href="#listing-06_12-02">Listing 06.12-02</a></div>
<div class="content">
<pre class="highlight"><code>STRUCTURE Duree (ABSTRACT) =
END Duree;

STRUCTURE DureeAujourdHui EXTENDS Duree =
END DureeAujourdHui;

STRUCTURE DureeEnJours EXTENDS Duree =
  Duree: MANDATORY Jours [d];
END DureeEnJours;

....

CLASS TypeBillet =
  DureeValidite: Duree;
END TypeBillet;</code></pre>
</div>
</div>
<div class="paragraph">
<p>La durée de validité d&#8217;un type de billet donné est décrite par une instance (un élément structuré) de la structure DureeAujourdHui, DureeEnJours, DureeEnMois, etc. On pourrait même préciser la modélisation un peu plus en veillant à ce que l&#8217;unité d&#8217;un laps de temps explicite (jour, mois, etc.) soit toujours une durée et en définissant une énumération pour les durées implicites (semaine, saison, etc.) :</p>
</div>
<div id="listing-06_12-03" class="listingblock">
<div class="title"><a href="#listing-06_12-03">Listing 06.12-03</a></div>
<div class="content">
<pre class="highlight"><code>STRUCTURE Duree (ABSTRACT) =
END Duree;

STRUCTURE DureeImplicite EXTENDS Duree =
  LapsTemps: MANDATORY (Jour, Semaine, Mois, Annee);
END DureeImplicite;

STRUCTURE DureeExplicite (ABSTRACT) EXTENDS Duree =
  LapsTemps (ABSTRACT): MANDATORY NUMERIC [TIME];
END DureeExplicite;

STRUCTURE DureeEnMinutes EXTENDS DureeExplicite =
  LapsTemps (EXTENDED): MANDATORY 0 .. 200 [Units.min];
END DureeEnMinutes;

STRUCTURE DureeEnJours EXTENDS DureeExplicite =
  LapsTemps (EXTENDED): MANDATORY 0 .. 1000 [d];
END DureeEnJours;</code></pre>
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="img/image52.png" alt="image52">
</div>
<div class="title">Figure 17. Modélisation détaillée des durées à l&#8217;aide de structures. Il est ainsi possible que la durée de validité d&#8217;un billet soit d&#8217;un mois (DureeImplicite; à gauche) ou de trente jours exactement (DureeEnJours; à droite), selon les besoins.</div>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<div class="title">Warning</div>
</td>
<td class="content">
Une modélisation précise, détaillée et appropriée est fondamentalement à privilégier. Il faut cependant avoir conscience du fait qu&#8217;elle n&#8217;est judicieuse que si elle peut être mise en pratique. Que cela signifie-t-il pour les logiciels ? Et plus encore : que cela signifie-t-il pour les personnes amenées à saisir et à traiter les données ? Et inversement : quelles sont les implications d&#8217;un écart par rapport au modèle correct ? Dans certaines circonstances, il peut donc être plus sage de se satisfaire de la solution simple préconisée précédemment.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_6_12_3"><a class="anchor" href="#_6_12_3"></a>Durée précise</h4>
<div class="paragraph">
<p>Les durées ne concernent pas uniquement les billets. Tous les vendredis, les Ilinois organisent une compétition de ski ouverte aux hôtes de la station. Les temps de parcours sont mesurés en minutes, secondes et centièmes de secondes. Il est tout naturel de définir une structure à cette fin, présentant les attributs Minutes et Secondes :</p>
</div>
<div id="listing-06_12-04" class="listingblock">
<div class="title"><a href="#listing-06_12-04">Listing 06.12-04</a></div>
<div class="content">
<pre class="highlight"><code>STRUCTURE DureeEnMinutes EXTENDS Duree =
  Minutes: 0 .. 9999.99 [min];
  Secondes: 0.00 .. 59.99 [s];
END DureeEnMinutes;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Afin que le lien entre les minutes et les secondes puisse être exprimé, une possibilité supplémentaire est proposée :</p>
</div>
<div id="listing-06_12-05" class="listingblock">
<div class="title"><a href="#listing-06_12-05">Listing 06.12-05</a></div>
<div class="content">
<pre class="highlight"><code>STRUCTURE DureeEnMinutes EXTENDS Duree =
  Minutes: 0 .. 9999.99 [min];
  CONTINOUS SUBDIVISION Secondes: 0.00 .. 59.99 [s];
END DureeEnMinutes;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Aucune indication n&#8217;est fournie sur la manière dont de telles durées peuvent être mémorisées par un ordinateur. Il ne s&#8217;agit que d&#8217;un moyen destiné à décrire ce que l&#8217;on souhaite, au plus près possible du concept.</p>
</div>
</div>
<div class="sect3">
<h4 id="_6_12_4"><a class="anchor" href="#_6_12_4"></a>Représentation formatée de structures</h4>
<div class="paragraph">
<p>La compétition de ski ouverte aux hôtes de la station est toujours organisée de telle façon que même les moniteurs de ski aient besoin de plus de trente secondes pour la descente. Quant aux concurrents qui rejoignent la ligne d&#8217;arrivée en plus de trois minutes et trente secondes, un thé leur est offert pour les réchauffer mais leur temps n&#8217;est pas pris en compte.</p>
</div>
<div class="paragraph">
<p>Comment le domaine des valeurs admissibles (de 30 secondes à 3 minutes et 30 secondes) peut-il à présent être défini ? La solution réside dans des domaines de valeurs formatés :</p>
</div>
<div id="listing-06_12-06" class="listingblock">
<div class="title"><a href="#listing-06_12-06">Listing 06.12-06</a></div>
<div class="content">
<pre class="highlight"><code>DOMAIN DureeenMinSec = FORMAT BASED ON DureeenMinutes
  ( Minutes ":" Secondes );

CLASS TempsDescente =
  Prenom: TEXT*50;
  Nom: TEXT*50;
  TempsParcours: FORMAT DureeenMinSec "0:30" .. "3:30";
END TempsDescente;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Un domaine de valeurs formaté prend appui sur une structure et indique comment une chaîne de caractères reproduisant la valeur résulte des différents attributs de la structure et de constantes textuelles. Des restrictions de domaines de valeurs peuvent être définies sous cette forme. La représentation formatée est également utilisée pour le transfert de données. Il est ainsi possible, au moins partiellement, d&#8217;accepter directement certaines formes de représentation requises en externe. Ce recours peut notamment être utilisé pour la représentation conforme à XML de durées et d&#8217;instants.</p>
</div>
</div>
<div class="sect3">
<h4 id="_6_12_5"><a class="anchor" href="#_6_12_5"></a>Instants</h4>
<div class="paragraph">
<p>Les messages d&#8217;état relatifs à la météo, aux délais d&#8217;attente ou à l&#8217;état des pistes diffusés dans le Val d&#8217;Ili doivent toujours faire mention de l&#8217;instant auquel l&#8217;état correspondant a été enregistré. D&#8217;emblée, on songe à fournir cette indication en heures et en minutes. Puis, après réflexion, on se rend compte qu&#8217;il faut y adjoindre la date, afin que des exploitations statistiques soient possibles. Cela devrait faire l&#8217;affaire !</p>
</div>
<div class="paragraph">
<p>Vraiment ? Les nuits de pleine lune, lorsque le temps est clair, les Remontées mécaniques de la Dent d&#8217;Ili proposent un service exceptionnel jusqu&#8217;au sommet de la station afin que la nuit Dracula, très prisée des noctambules, puisse s&#8217;y dérouler. Mais les messages d&#8217;état n&#8217;en ont cure : nuit Dracula ou pas, ils sont transmis à toute heure. Même à 2h30. Et un certain dimanche matin, celui où l&#8217;on passe de l&#8217;heure d&#8217;été à l&#8217;heure d&#8217;hiver, le message de 2h30 a semé un joyeux désordre : il était antérieur au précédent ! C&#8217;est normal, toutes les heures comprises entre 2h00 et 3h00 sont indiquées deux fois cette nuit-là, une fois en heure d&#8217;été et une fois en heure d&#8217;hiver.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Il est primordial, pour toute indication horaire, de connaître le système de référence auquel elle se rapporte.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Dans quel système nous exprimons-nous : en heure d&#8217;été, en heure d&#8217;hiver, en UTC ? A tout prendre, mieux vaut alors qu&#8217;il soit largement reconnu au plan international ! On en vient donc rapidement à penser que tout pourrait être exprimé en UTC et que l&#8217;on pourrait laisser le soin à l&#8217;ordinateur de présenter ses données à l&#8217;utilisateur dans le fuseau (la zone) qui est le sien.</p>
</div>
<div class="paragraph">
<p>INTERLIS 2 offre la possibilité de décrire non seulement le domaine de valeurs et l&#8217;unité mais également le système de référence. Pour les heures UTC, des domaines de valeurs déjà formatés sont prédéfinis dans le respect des règles XML (XMLTime, XMLDate, XMLDateTime).</p>
</div>
<div class="paragraph">
<p>Il est pourtant préférable d&#8217;exprimer les heures d&#8217;ouverture ou l&#8217;horaire de service en heure locale. Minuit sera toujours à 0h00, en heure d&#8217;hiver comme en heure d&#8217;été. Mais il ne s&#8217;agit pas là de véritables instants, plutôt de la description d&#8217;écarts par rapport à minuit, en fonction de l&#8217;heure légale actuelle.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<div class="title">Warning</div>
</td>
<td class="content">
La prudence la plus extrême doit être de mise lorsque l&#8217;heure et en particulier des instants bien définis jouent un rôle crucial.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_6_13"><a class="anchor" href="#_6_13"></a>Zones tarifaires, messages d&#8217;état – Relations</h3>
<div class="sect3">
<h4 id="_6_13_1"><a class="anchor" href="#_6_13_1"></a>Rôles</h4>
<div class="paragraph">
<p>Qu&#8217;est donc une société de remontées mécaniques pour une ligne particulière ? Son propriétaire ? Non, son exploitant !</p>
</div>
<div class="paragraph">
<p>Dans la relation liant la société de remontées mécaniques à une ligne particulière, l&#8217;entreprise endosse le rôle d&#8217;exploitant.</p>
</div>
<div class="paragraph">
<p>Sur le graphique, le nom du rôle figure à l&#8217;extrémité du trait de relation, du côté de son détenteur, mais il est généralement omis lorsqu&#8217;il est identique au nom de la classe.</p>
</div>
<div id="listing-06_13-01" class="listingblock">
<div class="title"><a href="#listing-06_13-01">Listing 06.13-01</a></div>
<div class="content">
<pre class="highlight"><code>ASSOCIATION =
  Exploitant -- {1} SocieteRemonteesMecaniques;
  Ligne_Remontee -- {*} RemonteeMecanique;
END;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Figure 48 : Il est possible, selon ce modèle, de s&#8217;enquérir de l&#8217;exploitant d&#8217;une remontée mécanique. « Exploitant » est un <em>rôle</em> que la classe des « sociétés de remontées » mécaniques endosse vis-à-vis de la classe des « remontées mécaniques ». La relation liant la société de remontées mécaniques et la ligne (remontée mécanique) est indiquée en dessous en notation INTERLIS.</p>
</div>
<div class="paragraph">
<p>Il est parfaitement normal que le choix des noms de rôles se porte sur des noms identiques à ceux des classes. Dans la relation liant par exemple une remontée mécanique à une zone tarifaire, introduire des noms supplémentaires présente peu d&#8217;intérêt. Il en va toutefois différemment lorsqu&#8217;une relation lie des objets de la même classe et les noms supplémentaires sont alors bien utiles. On souhaiterait par ailleurs représenter le fait qu&#8217;une société de remontées mécaniques possède d&#8217;autres entreprises qui sont alors ses filiales.</p>
</div>
<div id="listing-06_13-02" class="listingblock">
<div class="title"><a href="#listing-06_13-02">Listing 06.13-02</a></div>
<div class="content">
<pre class="highlight"><code>ASSOCIATION =
  Filiale -- {*} SocieteRemonteesMecaniques;
  Mere -- {0..1} SocieteRemonteesMecaniques;
END;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Figure 49 : Une société de remontées mécaniques peut aussi bien être la société mère d&#8217;une autre entreprise de transport que l&#8217;une de ses filiales. Dans de tels cas, le nom de classe n&#8217;est plus approprié en tant que nom de rôle. L&#8217;exemple ci-dessus est présenté à gauche dans le formalisme graphique UML et à droite en notation textuelle INTERLIS.</p>
</div>
</div>
<div class="sect3">
<h4 id="_6_13_2"><a class="anchor" href="#_6_13_2"></a>Intensité d&#8217;une relation</h4>
<div class="paragraph">
<p>L&#8217;association, l&#8217;agrégation et la composition expriment des niveaux d&#8217;intensité différents de relations.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Association</strong> – La relation entre la zone tarifaire et la remontée mécanique est relativement lâche. Deux objets sont affectés l&#8217;un à l&#8217;autre sans lien de subordination. L&#8217;association est une relation d&#8217;égal à égal. En général, la plupart des relations que compte un modèle de données sont des associations ordinaires.</p>
</li>
<li>
<p><strong>Agrégation</strong> – Une remontée mécanique constitue un objet largement autonome. Pourtant, il lui faut toujours être coiffée par une société qui en assure l&#8217;exploitation. La ligne est subordonnée à la société de remontées mécaniques.</p>
</li>
<li>
<p><strong>Composition</strong> – Il existe une relation très étroite entre une remontée mécanique et les pylônes qui la soutiennent. Un pylône n&#8217;a de sens qu&#8217;en conjonction avec une remontée mécanique donnée. La composition est la relation existant entre un tout et ses parties (généralement physiques).</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>La subdivision en fonction de ces intensités n&#8217;est pas toujours simple. Il existe des règles informatiques supplémentaires pouvant parfois simplifier la classification :</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Supprimer</strong> – La suppression d&#8217;une société de remontées mécaniques entraîne la disparition de l&#8217;exploitant pour les remontées mécaniques qui lui sont affectées. Si une remontée mécanique est supprimée, tous ses pylônes le sont aussi. La suppression d&#8217;un tout efface également toutes les parties en liaison avec lui via une composition.</p>
</li>
<li>
<p><strong>Copier</strong> – En cas de copie d&#8217;une société de remontées mécaniques (ce qui, dans la réalité, est loin d&#8217;être aussi simple que sur un ordinateur), des copies de toutes les remontés mécaniques qui lui sont affectées sont également générées et subordonnées à la nouvelle entreprise de transport. Pour chaque remontée, des copies de ses pylônes sont également effectuées. La copie d&#8217;un objet génère également la duplication des objets qui lui sont associés par le biais d&#8217;agrégations et de compositions. Aucune copie n&#8217;est en revanche créée pour les objets qui lui sont associés par l&#8217;intermédiaire d&#8217;associations ordinaires.</p>
</li>
</ul>
</div>
<div class="imageblock">
<div class="content">
<img src="img/image55.png" alt="] image:img/image56.png[] image:img/image57.png[">
</div>
<div class="title">Figure 18. L&#8217;association (à gauche), l&#8217;agrégation (au centre) et la composition (à droite) sont différents types de relations se différenciant les unes des autres par leurs niveaux d&#8217;intensité : un pylône est en relation si étroite avec sa remontée mécanique qu&#8217;il peut être interprété comme faisant partie intégrante de la ligne. Comparées à la composition, l&#8217;agrégation et l&#8217;association sont moins intenses.</div>
</div>
<div class="paragraph">
<p>La notation INTERLIS est très proche de la représentation graphique. Le nom du rôle doit cependant être figuré lorsqu&#8217;il se distingue du nom de la classe.</p>
</div>
<div id="listing-06_13-03" class="listingblock">
<div class="title"><a href="#listing-06_13-03">Listing 06.13-03</a></div>
<div class="content">
<pre class="highlight"><code>ASSOCIATION =
  RemonteeMecanique -- RemonteeMecanique;
  ZoneTarifaire -- ZoneTarifaire;
END;

ASSOCIATION =
  Exploitant -&lt;&gt; SocieteRemonteesMecaniques;
  RemonteeMecanique -- RemonteeMecanique;
END;

ASSOCIATION =
  RemonteeMecanique –&lt;#&gt; RemonteeMecanique;
  Pylone -- Pylone;
END;</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_6_13_3"><a class="anchor" href="#_6_13_3"></a>Relations avec attributs</h4>
<div class="paragraph">
<p>Des billets de divers types donnent le droit d&#8217;emprunter des remontées mécaniques exploitées par des entreprises de transport en montagne différentes. D&#8217;où la question qui se pose alors : comment le gain résultant de la vente d&#8217;un billet est-il ventilé entre les différentes entreprises ? Prenons un exemple : l&#8217;abonnement général national permet d&#8217;emprunter la ligne de la Dent d&#8217;Ili. En contrepartie, l&#8217;accord conclu au plan national permet aux Remontées mécaniques de la Dent d&#8217;Ili de percevoir 0.13% du chiffre d&#8217;affaires global réalisé sur la vente des abonnements généraux.</p>
</div>
<div class="paragraph">
<p>Les relations peuvent également se voir affecter des attributs de sorte qu&#8217;elles peuvent être conçues comme des classes d&#8217;un genre un peu spécifique.</p>
</div>
<div id="listing-06_13-04" class="listingblock">
<div class="title"><a href="#listing-06_13-04">Listing 06.13-04</a></div>
<div class="content">
<pre class="highlight"><code>ASSOCIATION Pourcentage =
  Participant -- {*} SocieteRemonteesMecaniques;
  TypeBillet -- {*} TypeBillet;

  ATTRIBUTE
    Pourcentage: 0.00 .. 100.00 [Units.Percent];

END Pourcentage;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Figure 51 : Une société de remontées mécaniques se voit rétrocéder un pourcentage prédéfini du produit de la vente d&#8217;un type de billet donné qui n&#8217;est une propriété ni de l&#8217;entreprise de transport, ni du type de billet mais bien de la relation qui les unit. De telles situations sont modélisées par l&#8217;intermédiaire de classes relationnelles.</p>
</div>
</div>
<div class="sect3">
<h4 id="_6_13_4"><a class="anchor" href="#_6_13_4"></a>Relations multiples</h4>
<div class="paragraph">
<p>Désireuse d&#8217;avoir une vue d&#8217;ensemble plus fine de la vente des billets, l&#8217;Association nationale souhaiterait pouvoir connaître la ventilation des ventes des différents types de billets, point de vente par point de vente et saison par saison.</p>
</div>
<div id="listing-06_13-05" class="listingblock">
<div class="title"><a href="#listing-06_13-05">Listing 06.13-05</a></div>
<div class="content">
<pre class="highlight"><code>ASSOCIATION Vente =
  PointVente –- {*} PointVente;
  Saison –- {*} Saison;
  TypeBillet –- {*} TypeBillet;

  ATTRIBUTE
    Nombre: 1 .. 999999 [Units.CountedObjects];
    Montant: 0.00 .. 9999999.99 [Beotie.Couronne];

END Vente;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Figure 52 : La vente est ventilée par points de vente, types de billets et saisons. Il s&#8217;agit d&#8217;une relation multiple entre trois partenaires égaux (les classes des points de vente, des types de billets et des saisons). La vente est en revanche une classe relationnelle définissant les propriétés de la relation (par exemple le nombre de billets vendus de même que le montant encaissé).</p>
</div>
<div class="paragraph">
<p>Il existe donc une relation d&#8217;égal à égal liant les points de vente, les types de billets et les saisons à laquelle sont en plus affectés deux attributs, à savoir le nombre de billets vendus et le montant encaissé. Cette relation ne lie donc plus deux mais trois classes.</p>
</div>
<div class="paragraph">
<p>Mais que signifient alors les informations de cardinalité pour de telles relations ? S&#8217;agissant par exemple de la saison, la cardinalité (*) nous apprend qu&#8217;il peut exister un nombre quelconque d&#8217;affectations aux saisons pour une combinaison donnée de type de billet et de point de vente. Si une cardinalité de valeur 1 avait été indiquée à la place, cela aurait signifié qu&#8217;un seul type de billet aurait pu être vendu par un seul point de vente durant une seule saison.</p>
</div>
<div class="paragraph">
<p>C&#8217;est un peu compliqué, je vous l&#8217;accorde. Mais avons-nous réellement besoin de relations multiples ? Ne pourrait-on pas les réduire à des relations duales ordinaires ?</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/image60.png" alt="image60">
</div>
<div class="title">Figure 19. Des relations multiples, impliquant donc plusieurs intervenants, peuvent être réduites à des relations duales ordinaires. La classe relationnelle précédente (celle de la vente dans ce cas) devient un partenaire de rang équivalent aux trois autres qui ne sont plus alors qu&#8217;en relation directe avec elle.</div>
</div>
<div class="paragraph">
<p>Toutefois, ce modèle laisse moins clairement transparaître le fait que les trois classes (point de vente, type de billet et saison) sont en relation les unes avec les autres.</p>
</div>
</div>
<div class="sect3">
<h4 id="_6_13_5"><a class="anchor" href="#_6_13_5"></a>Relations ordonnées</h4>
<div class="literalblock">
<div class="content">
<pre>Aucun ordre ne peut être dégagé pour les remontées mécaniques affectées à la société des Remontées mécaniques de la Dent d'Ili. La question de savoir si l'affectation du téléphérique doit précéder ou suivre celle de la télécabine est sans véritable objet.</pre>
</div>
</div>
<div class="paragraph">
<p>Il est bien sûr possible de répertorier les lignes d&#8217;une entreprise par ordre alphabétique, mais ce tri n&#8217;est en rien une propriété de la relation entre la société de remontées mécaniques et les lignes qu&#8217;elle exploite, il s&#8217;agit d&#8217;une simple commodité de présentation. D&#8217;autres raisons pourraient en revanche justifier un tri : les coûts d&#8217;investissements, les durées des trajets, etc.</p>
</div>
<div class="paragraph">
<p>Ne serait-il toutefois pas judicieux d&#8217;enregistrer l&#8217;ordre de succession de l&#8217;établissement des relations ? Le téléphérique a ouvert le premier, suivi du remonte-pente, de la télécabine, etc. Il serait sans doute plus indiqué dans ce cas de pourvoir la relation de deux attributs supplémentaires, à savoir le début et la fin de l&#8217;exploitation. On pourrait même enregistrer les différents exploitants qui se sont succédé au cours des années. Il n&#8217;est en revanche pas opportun d&#8217;envisager cette relation comme une agrégation.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/image61.png" alt="image61">
</div>
<div class="title">Figure 20. On pourrait imaginer recourir à une relation ordonnée afin d&#8217;enregistrer l&#8217;ordre de mise en service des différentes remontées mécaniques d&#8217;une entreprise. Le modèle de la figure suivante semble toutefois plus indiqué.</div>
</div>
<div class="imageblock">
<div class="content">
<img src="img/image62.png" alt="image62">
</div>
<div class="title">Figure 21. Le modèle gagne en clarté si l&#8217;on recourt à une classe relationnelle, parce qu&#8217;il permet facilement de procéder à des exploitations complémentaires. Ainsi, les lignes d&#8217;une entreprise peuvent-elles être triées en fonction de la date de la fin de leur exploitation et un programme informatique serait en mesure de préciser l&#8217;identité du ou des exploitants successifs de la remontée mécanique.</div>
</div>
<div class="paragraph">
<p>Des considérations du même ordre peuvent s&#8217;appliquer à la relation entre la ligne et ses pylônes : l&#8217;introduction d&#8217;un ordre dans la relation pourrait permettre leur classement de la station inférieure jusqu&#8217;à la station supérieure. D&#8217;un point de vue conceptuel, il est cependant plus judicieux de gérer un attribut de position pour les pylônes puis de déduire l&#8217;ordre de succession de ces positions et du tracé de la ligne.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<div class="title">Warning</div>
</td>
<td class="content">
Réfléchissez bien avant de déclarer une relation comme étant ordonnée : cet ordre ne peut-il pas se déduire d&#8217;attributs de la relation ou des classes concernées ?
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Dans quels cas les relations ordonnées se justifient-elles réellement ? La télécabine d&#8217;Ili-les-Bains à la Dent d&#8217;Ili comporte des cabines qui ne sont pas assujetties à demeure au câble de transport. Elles peuvent être décrochées à la station inférieure ou à la station supérieure puis à nouveau accrochées si le besoin s&#8217;en fait sentir. Quelles cabines sont actuellement accrochées au câble et dans quel ordre ?</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/image63.png" alt="image63">
</div>
<div class="title">Figure 22. Une cabine possède bien un numéro, mais celui-ci ne donne aucune indication sur la position de cette cabine sur le câble. Une relation ordonnée est donc opportune ici.</div>
</div>
<div class="paragraph">
<p>L&#8217;ordre est ici requis. Il ne peut pas être fait appel au numéro de la cabine pour l&#8217;obtenir, puisque celui-ci identifie simplement une cabine donnée et ne fournit aucune indication sur sa position actuelle sur le câble.</p>
</div>
</div>
<div class="sect3">
<h4 id="_6_13_6"><a class="anchor" href="#_6_13_6"></a>Etendre des relations</h4>
<div class="paragraph">
<p>Une société de remontées mécaniques est en relation avec un grand nombre de personnes. Les unes sont salariées par elle, les autres détiennent des parts de son capital. Comme précédemment, dans le cas des différents types de remontées mécaniques, diverses possibilités existent pour la modélisation.</p>
</div>
<div class="paragraph">
<p>L&#8217;une de celles-ci consiste à définir deux relations différentes entre la société de remontés mécaniques et les personnes : l&#8217;une pour le salariat, l&#8217;autre pour l&#8217;actionnariat. Si cette distinction peut occasionnellement perdre de son importance (peut-être pour l&#8217;envoi, à l&#8217;occasion des fêtes de fin d&#8217;année, d&#8217;un petit train en chocolat), il n&#8217;en demeure pas moins qu&#8217;une application doit se préoccuper de chacune de ces deux relations.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/image64.png" alt="image64">
</div>
<div class="title">Figure 23. Une personne peut être salariée et/ou actionnaire d&#8217;une société de remontées mécaniques. Cette situation est ici modélisée par le biais de deux relations différentes. Si l&#8217;entreprise souhaite faire un petit cadeau à ses salariés comme à ses actionnaires à l&#8217;occasion des fêtes de fin d&#8217;année (en leur envoyant des chocolats par exemple), les deux relations devront être exploitées.</div>
</div>
<div class="paragraph">
<p>Une autre possibilité de modélisation consiste à définir une relation primaire (contact) puis à l&#8217;étendre au salariat et à l&#8217;actionnariat. Tant qu&#8217;une application n&#8217;a pas besoin de connaître la nature exacte du lien qu&#8217;entretient une personne avec l&#8217;entreprise, elle recourt à la relation primaire (contact) et obtient ainsi connaissance de l&#8217;ensemble des personnes en contact de quelque nature que ce soit avec l&#8217;entreprise. Une application ne concernant que les salariés utilise la relation étendue du salariat et n&#8217;obtient connaissance que des personnes salariées par l&#8217;entreprise.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/image65.png" alt="image65">
</div>
<div class="title">Figure 24. Dans cette variante, la relation entre la société de remontées mécaniques et une personne, quelle qu&#8217;elle soit, est modélisée par la classe relationnelle du contact. Le salariat et l&#8217;actionnariat constituent alors des formes particulières de contact avec l&#8217;entreprise. Quiconque voudra s&#8217;enquérir des contacts de l&#8217;entreprise obtiendra automatiquement connaissance des salariés et des actionnaires. Les classes relationnelles sont donc extensibles sur le même modèle que les classes d&#8217;objets, ce qui se traduit sur le diagramme par la représentation d&#8217;une flèche évidée.</div>
</div>
<div class="paragraph">
<p>On pourrait affiner encore la relation du salariat en introduisant par exemple une extension « direction ».</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/image66.png" alt="image66">
</div>
<div class="title">Figure 25. La relation entre une entreprise de transport et son directeur (« Direction ») constitue un cas particulier de la relation du « salariat ».</div>
</div>
<div class="paragraph">
<p>Bien souvent, les extensions de relations sont étroitement associées aux extensions de classes d&#8217;objets. Au lieu d&#8217;affirmer d&#8217;emblée qu&#8217;une remontée mécanique comprend des pylônes, on parle dans un premier temps de moyens d&#8217;exploitation. Ceux-ci sont liés à la ligne par l&#8217;intermédiaire d&#8217;associations, liens assez lâches. Les pylônes constituant toutefois une propriété constitutive importante de différents types de remontées mécaniques, on introduit la classe RemonteeAvecPylones qui est alors en relation avec les pylônes eux-mêmes. Cette classe est cependant gérée comme une extension de la relation entre les remontées mécaniques et les moyens d&#8217;exploitation. Les pylônes étant liés à une remontée mécanique donnée – au contraire par exemple de dameuses –, cette relation se transforme en composition. L&#8217;intensité d&#8217;une relation ne peut que se renforcer dans le cadre d&#8217;une extension et non s&#8217;affaiblir, car la relation risquerait alors de se trouver en contradiction avec sa définition de base.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/image67.png" alt="image67">
</div>
<div class="title">Figure 26. Il existe une relation ordinaire entre les remontées mécaniques et les moyens d&#8217;exploitation qui est renforcée en composition par des classes spécialisées.</div>
</div>
</div>
<div class="sect3">
<h4 id="_6_13_7"><a class="anchor" href="#_6_13_7"></a>Relations dérivables</h4>
<div class="paragraph">
<p>Lorsque l&#8217;estomac crie famine, on est plutôt enclin à choisir une piste de ski en bordure de laquelle on sait pouvoir trouver une auberge. Les pistes et les auberges n&#8217;en ont pas pour autant besoin d&#8217;être liées par une relation explicite permanente. Il suffit de savoir que l&#8217;auberge se trouve à proximité de la piste. Il s&#8217;agit donc d&#8217;une information pouvant se déduire de la position de l&#8217;auberge et du tracé de la piste (tous deux exprimés en coordonnées nationales).</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<div class="title">Warning</div>
</td>
<td class="content">
L&#8217;exploitation des informations du modèle ne passe pas nécessairement par l&#8217;établissement de relations. Les coordonnées constituent un excellent moyen d&#8217;établir les connexions requises, en particulier dans le cas de données à référence spatiale.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Il n&#8217;est pas non plus opportun d&#8217;intégrer la totalité des relations dérivables dans le modèle conceptuel, raison pour laquelle la relation dérivable entre les auberges et les pistes n&#8217;y figure pas.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<div class="title">Warning</div>
</td>
<td class="content">
Le modèle conceptuel ne doit décrire que les relations implicites d&#8217;importance au niveau conceptuel. Les logiciels peuvent ensuite établir des relations supplémentaires, en comparant et en combinant habilement les attributs des objets (et tout particulièrement leur position).
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Les relations à définir explicitement dans certains cas et dérivables dans d&#8217;autres revêtent une grande importance au plan conceptuel. La dérivation peut se fonder sur la position géographique comme sur d&#8217;autres propriétés. Les Ilinois ont par exemple introduit une zone tarifaire spéciale, décrite par une surface et englobant toutes les remontées mécaniques dont les stations inférieure et supérieure se situent dans ses limites.</p>
</div>
<div id="listing-06_13-06" class="listingblock">
<div class="title"><a href="#listing-06_13-06">Listing 06.13-06</a></div>
<div class="content">
<pre class="highlight"><code>CLASS ZoneTarifaireDansSecteur EXTENDS NatTour.Billets.ZoneTarifaire =
  Secteur: SurfaceBeotie;
END ZoneTarifaireDansSecteur;</code></pre>
</div>
</div>
<div class="paragraph">
<p>La relation entre cette zone tarifaire spéciale et les remontées mécaniques du secteur considéré peut être automatiquement établie au moyen de vues (cf. § <a href="#_6_17">Les zones tarifaires ne suscitent guère d&#8217;intérêt – Vues</a>).</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_6_14"><a class="anchor" href="#_6_14"></a>Exceptionnelles Remontées mécaniques de la Dent d&#8217;Ili – Règles d&#8217;intégrité</h3>
<div class="sect3">
<h4 id="_6_14_1"><a class="anchor" href="#_6_14_1"></a>Informations de base</h4>
<div class="paragraph">
<p>Vous vous souvenez que les Remontées mécaniques de la Dent d&#8217;Ili souhaitent pouvoir saisir l&#8217;état actuel de chacune de leurs lignes et entre autres les conditions météo prévalant à la station supérieure :</p>
</div>
<div id="listing-06_14-01" class="listingblock">
<div class="title"><a href="#listing-06_14-01">Listing 06.14-01</a></div>
<div class="content">
<pre class="highlight"><code>CLASS MessageEtat =
  Temperature: MANDATORY –50 .. 50 [oC];
  DirectionVent: (N, NE, E, SE, S, SW, W, NW) CIRCULAR;
  VitesseVent: MANDATORY 0 .. 200 [kmh];
  DelaiAttente: DureeEnMinutes;
  Saisi: MANDATORY InstantHEC;
END MessageEtat;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Avec cette définition, un message indiquant qu&#8217;un vent souffle d&#8217;une direction indéfinie à une vitesse de 60 km/h serait possible. Mais ce n&#8217;est pas vraiment le but recherché. Une direction du vent indéfinie doit impliquer le calme plat, c&#8217;est à dire un vent de vitesse nulle. Et inversement, dès lors que la vitesse du vent n&#8217;est pas nulle, une direction doit lui être attribuée.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Des situations dans lesquelles un lien préétabli doit exister entre différents attributs d&#8217;un objet ou même entre différents objets sont décrites au moyen de <strong>règles d&#8217;intégrité</strong>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Une règle d&#8217;intégrité est d&#8217;ordinaire décrite au moyen d&#8217;une formule dont l&#8217;exploitation révèle si la règle est respectée ou non. Le calme plat peut donc être régi par une expression logique du type suivant :</p>
</div>
<div id="listing-06_14-02" class="listingblock">
<div class="title"><a href="#listing-06_14-02">Listing 06.14-02</a></div>
<div class="content">
<pre class="highlight"><code>CLASS MessageEtat =
  Temperature: MANDATORY –50 .. 50 [oC];
  DirectionVent: (N, NE, E, SE, S, SW, W, NW) CIRCULAR;
  VitesseVent: MANDATORY 0 .. 200 [kmh];
  DelaiAttente: DureeEnMinutes;
  Saisi: MANDATORY InstantHEC;
  MANDATORY CONSTRAINT
    DEFINED (DirectionVent) == (VitesseVent &gt; 0);
END MessageEtat;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Si la direction du vent est définie, alors sa vitesse doit être supérieure à zéro. Si la direction du vent est indéfinie, sa vitesse doit être nulle. Il est par conséquent exigé que l&#8217;on mette sur un pied d&#8217;égalité (==) le fait que la direction du vent est définie et le fait que la vitesse du vent est supérieure à zéro.</p>
</div>
<div class="paragraph">
<p>Cependant, les règles d&#8217;intégrité peuvent fréquemment être évitées en structurant le modèle différemment. Si l&#8217;on intègre les informations relatives au vent au sein d&#8217;une structure que l&#8217;on définit comme un tout facultatif, plus aucune règle d&#8217;intégrité n&#8217;est nécessaire. L&#8217;élément structuré fait défaut en cas de calme plat et s&#8217;il vente, la direction et la vitesse du vent sont nécessaires disponibles.</p>
</div>
<div id="listing-06_14-03" class="listingblock">
<div class="title"><a href="#listing-06_14-03">Listing 06.14-03</a></div>
<div class="content">
<pre class="highlight"><code>STRUCTURE InfoVent =
  DirectionVent: MANDATORY (N, NE, E, SE, S, SW, W, NW) CIRCULAR;
  VitesseVent: MANDATORY 0 .. 200 [kmh];
END Vent;

CLASS MessageEtat =
  Temperature: MANDATORY –50 .. 50 [oC];
  Vent: InfoVent;
  DelaiAttente: DureeEnMinutes;
  Saisi: MANDATORY InstantHEC;
END MessageEtat;</code></pre>
</div>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<div class="title">Warning</div>
</td>
<td class="content">
La présence de règles d&#8217;intégrité – tout particulièrement si elles sont complexes – fait toujours peser un soupçon sur le niveau d&#8217;optimisation du modèle. D&#8217;un autre côté, il n&#8217;y a vraiment aucun intérêt à compliquer artificiellement un modèle simple dans l&#8217;unique but d&#8217;éviter une règle d&#8217;intégrité.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_6_14_2"><a class="anchor" href="#_6_14_2"></a>Conditions de plausibilité</h4>
<div class="paragraph">
<p>Dans l&#8217;ensemble, les employés des Remontées mécaniques de la Dent d&#8217;Ili gagnent plutôt bien leur vie, sans parler du directeur dont le salaire atteint des sommets.</p>
</div>
<div class="paragraph">
<p>Les règles d&#8217;intégrité s&#8217;appliquent généralement à tous les objets de la classe concernée. Dans INTERLIS 2, elles sont désignées par MANDATORY CONSTRAINT. On utilise parfois le terme de règles « dures », parce qu&#8217;elles sont toujours à respecter. Mais il existe d&#8217;autres règles, à satisfaire dans le cas général mais tolérant des exceptions.</p>
</div>
<div class="paragraph">
<p>S&#8217;agissant d&#8217;attributs tels que le salaire mensuel ou la taille d&#8217;une personne, le domaine d&#8217;admissibilité retenu doit être relativement étendu. Les valeurs de la plupart des objets se concentrent cependant dans un domaine bien plus restreint. Des exceptions sont toutefois possibles, cas par exemple du salaire du directeur.</p>
</div>
<div id="listing-06_14-04" class="listingblock">
<div class="title"><a href="#listing-06_14-04">Listing 06.14-04</a></div>
<div class="content">
<pre class="highlight"><code>ASSOCIATION Salariat =
  ...
  SalaireMensuel: MANDATORY 0 .. 20000 [Couronnes];
  ...
  CONSTRAINT &gt;= 95%
    SalaireMensuel &lt; 10000;
END Salariat;</code></pre>
</div>
</div>
<div class="paragraph">
<p>On estime que le salaire mensuel est inférieur à 10'000 couronnes dans au moins (&gt;=) 95% des cas. Si un modèle intègre de telles conditions « souples », la plausibilité des données entrées peut être vérifiée et un contrôle statistique effectué.</p>
</div>
</div>
<div class="sect3">
<h4 id="_6_14_3"><a class="anchor" href="#_6_14_3"></a>Conditions d&#8217;unicité</h4>
<div class="paragraph">
<p>Comment les salariés ou les actionnaires des entreprises de transport en montagne sont-ils identifiés ? Il serait très tentant mais inapproprié d&#8217;utiliser le nom et le prénom à cet effet :</p>
</div>
<div id="listing-06_14-05" class="listingblock">
<div class="title"><a href="#listing-06_14-05">Listing 06.14-05</a></div>
<div class="content">
<pre class="highlight"><code>CLASS Personne =
  Nom: TEXT*50;
  Prenom: TEXT*20;
  UNIQUE Nom, Prenom;
END Personne;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Il ne serait donc pas permis d&#8217;enregistrer deux personnes différentes possédant le même nom et le même prénom. Ainsi, le nouveau conducteur de locomotive Jean Martin ne pourrait être embauché qu&#8217;une fois son homonyme de la comptabilité limogé.</p>
</div>
<div class="paragraph">
<p>Quelle condition d&#8217;unicité pourrait être plus appropriée ? Et d&#8217;abord, pourquoi utiliser des conditions d&#8217;unicité ?</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Une <strong>condition d&#8217;unicité</strong> ne sert pas à l&#8217;identification d&#8217;un objet au sein d&#8217;un logiciel donné mais décrit les combinaisons d&#8217;attributs devant concrètement être uniques.
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Au sein d&#8217;un logiciel comme durant un transfert de données, un objet est repéré par une <strong>identification d&#8217;objet</strong> technique, dénuée de toute signification pour l&#8217;application.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Une condition d&#8217;unicité n&#8217;est par conséquent pas requise pour chaque classe d&#8217;objet dans le seul but de pouvoir identifier un objet. Il suffit que l&#8217;objet de données correspondant à la personne effective puisse être trouvé lors de son enregistrement. Il peut également être fait appel à des attributs, des relations, etc. dans ce cadre sans qu&#8217;une combinaison ait à être unique.</p>
</div>
<div class="paragraph">
<p>Si l&#8217;on souhaite toutefois introduire une identification externe au système, compréhensible par tout un chacun par exemple, il est alors nécessaire de disposer d&#8217;un attribut ou d&#8217;une combinaison d&#8217;attributs dont les valeurs sont uniques sur l&#8217;ensemble des objets considérés. Des attributs artificiels sont souvent créés à cette fin (numéro d&#8217;assurance, de client, d&#8217;article, etc.)</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<div class="title">Warning</div>
</td>
<td class="content">
Les identificateurs artificiels sont autant que possible à éviter. Lorsqu&#8217;ils sont inévitables, il convient de veiller à ce que les informations qu&#8217;ils contiennent ne fassent pas double emploi avec celles d&#8217;autres attributs.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Ce problème a été résolu d&#8217;une manière très simple pour les Remontées mécaniques de la Dent d&#8217;Ili, en introduisant tout bêtement un numéro personnel. Dès qu&#8217;une personne rejoint les Remontées mécaniques de la Dent d&#8217;Ili, un numéro non encore attribué lui est affecté.</p>
</div>
<div id="listing-06_14-06" class="listingblock">
<div class="title"><a href="#listing-06_14-06">Listing 06.14-06</a></div>
<div class="content">
<pre class="highlight"><code>CLASS Personne =
  Nom: TEXT*50;
  Prenom: TEXT*20;
  NumeroPersonnel: 1 .. 9999;
  UNIQUE NumeroPersonnel;
END Personne;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Les choses deviendraient plus délicates si la classe par laquelle les personnes sont décrites était définie non pas par les Remontées mécaniques de la Dent d&#8217;Ili mais par l&#8217;Association nationale. Les numéros affectés à toutes les personnes dans le cadre de l&#8217;Association devraient alors être uniques – même en cas de saisie décentralisée. L&#8217;existence de deux numéros identiques (par exemple un pour les Remontées mécaniques de la Dent d&#8217;Ili et l&#8217;autre pour les Remontées mécaniques des montagnes bleues) signifierait la violation de la condition.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Les conditions d&#8217;unicité valent toujours pour tous les objets de la classe à laquelle la condition s&#8217;applique – même en cas de correspondance indirecte (sous la forme d&#8217;une extension de la classe).
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Une société de remontées mécaniques peut porter plusieurs noms, mais il ne doit exister qu&#8217;une seule désignation dans chaque langue : les Remontées mécaniques de la Dent d&#8217;Ili ne peuvent donc porter aucun autre nom en français. Cette restriction ne s&#8217;applique toutefois que localement, donc à une entreprise donnée. Les Remontées mécaniques des montagnes bleues possèdent elles aussi un nom en français. Autrement dit, il existe plus d&#8217;un nom dans une langue donnée si l&#8217;on considère l&#8217;ensemble des entreprises de transport. Et par conséquent, l&#8217;unicité de la désignation dans une langue donnée ne s&#8217;applique qu&#8217;à l&#8217;entreprise considérée.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Si un objet comporte des sous-structures, l&#8217;unicité ne doit généralement pas s&#8217;appliquer « globalement » aux éléments de l&#8217;ensemble des sous-structures, au contraire du cas des objets effectifs. Elle ne se rapporte d&#8217;ordinaire que « localement » aux éléments de sous-structure d&#8217;un seul objet.
</td>
</tr>
</table>
</div>
<div id="listing-06_14-07" class="listingblock">
<div class="title"><a href="#listing-06_14-07">Listing 06.14-07</a></div>
<div class="content">
<pre class="highlight"><code>STRUCTURE Designation =
  Nom: TEXT*100;
  Langue: TEXT*2;
END Designation;

STRUCTURE DesignationEntreprise EXTENDS Designation =
  NomAbrege: TEXT*10;
END DesignationEntreprise;

CLASS SocieteRemonteesMecaniques =
  Noms: BAG {1..*} OF DesignationEntreprise;
  UNIQUE
    (LOCAL) Noms : Langue;
END SocieteRemonteesMecaniques;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Comment alors parvenir à éviter tout conflit entre les noms abrégés des différentes entreprises ? Les Remontées mécaniques des montagnes bleues tout comme les Remontées mécaniques des montagnes blanches revendiquent le nom abrégé RMB. Dans INTERLIS 2, il est possible de formuler des règles d&#8217;intégrité valant non seulement pour les classes d&#8217;objets ou des éléments structurés locaux, mais également pour des vues (cf. § <a href="#_6_17">Les zones tarifaires ne suscitent guère d&#8217;intérêt – Vues</a>). Une vue donnée permet de faire d&#8217;éléments structurés des objets quasi indépendants, pour lesquels une nouvelle condition d&#8217;unicité peut à son tour être formulée.</p>
</div>
</div>
<div class="sect3">
<h4 id="_6_14_4"><a class="anchor" href="#_6_14_4"></a>Condition d&#8217;existence</h4>
<div class="paragraph">
<p>Au contraire d&#8217;un chemin de fer à crémaillère ou d&#8217;un funiculaire, le tracé d&#8217;un téléphérique, d&#8217;une télécabine, d&#8217;un remonte-pente, etc. est lié à des éléments fixes : les stations inférieure et supérieure de même que les pylônes intermédiaires.</p>
</div>
<div class="paragraph">
<p>Ce lien doit pouvoir être exprimé. Les lignes d&#8217;INTERLIS 2 relient toutefois des points d&#8217;appui qui sont avant tout des coordonnées et n&#8217;entretiennent aucun rapport avec des objets du modèle tels que les pylônes. Le lien entre le tracé et d&#8217;autres objets peut cependant être formulé sous la forme de règles d&#8217;intégrité.</p>
</div>
<div class="paragraph">
<p>Avec la définition suivante, chaque point du tracé doit s&#8217;appuyer sur la position d&#8217;un pylône (Pylone:Position), de la station inférieure d&#8217;une remontée mécanique (RemonteeMecanique:PosStationInf) ou (OR) de la station supérieure d&#8217;une remontée mécanique (RemonteeMecanique:PosStationSup).</p>
</div>
<div id="listing-06_14-08" class="listingblock">
<div class="title"><a href="#listing-06_14-08">Listing 06.14-08</a></div>
<div class="content">
<pre class="highlight"><code>CLASS RemonteeDependanteTerrain EXTENDS RemonteeMecanique =
  EXISTENCE CONSTRAINT
    Trace REQUIRED IN
      Pylone:Position
      OR
      RemonteeMecanique:PosStationInf
      OR
      RemonteeMecanique:PosStationSup;
END RemonteeDependanteTerrain;</code></pre>
</div>
</div>
<div class="paragraph">
<p>De telles conditions d&#8217;existence ne peuvent pas uniquement être formulées en lien avec des remontées mais peuvent également l&#8217;être avec des attributs ordinaires. Sur le plan conceptuel, elles peuvent toujours être considérées comme une forme de relation faible.</p>
</div>
</div>
<div class="sect3">
<h4 id="_6_14_5"><a class="anchor" href="#_6_14_5"></a>Héritage de règles d&#8217;intégrité</h4>
<div class="paragraph">
<p>Une règle d&#8217;intégrité a déjà été formulée pour la remontée mécanique elle-même : le tracé doit débuter à la station inférieure pour s&#8217;achever à la station supérieure. Autrement dit, le premier point du tracé (Tracee &#8594; Segments[FIRST] &#8594; SegmentEndPoint) doit correspondre à la position de la station inférieure et (AND) le dernier point du tracé (Tracee &#8594; Segments[LAST] &#8594; SegmentEndPoint) doit coïncider avec la position de la station supérieure.</p>
</div>
<div class="paragraph">
<p>Le paragraphe <a href="#_7_3">[_7_3]</a> expose la manière dont les lignes sont construites et présente l&#8217;attribut SegmentEndPoint, symbolisant le point final d&#8217;un segment de ligne.</p>
</div>
<div id="listing-06_14-09" class="listingblock">
<div class="title"><a href="#listing-06_14-09">Listing 06.14-09</a></div>
<div class="content">
<pre class="highlight"><code>CLASS RemonteeMecanique =
  PosStationInf: Beotie.CoordNational3;
  PosStationSup: Beotie.CoordNational3;
  Trace: LigneBeotieNormale;
  MANDATORY CONSTRAINT
    Tracee -&gt; Segments[FIRST] -&gt; SegmentEndPoint == PARENT == PosStationInf
    AND
    Tracee -&gt; Segments[LAST] -&gt; SegmentEndPoint == PARENT == PosStationSup;
END RemonteeMecanique;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Que signifie une telle définition pour d&#8217;éventuelles extensions de cette classe ?</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Des extensions de classes ne peuvent pas faire perdre leur validité à des règles d&#8217;intégrité. Elles ne peuvent que définir des règles supplémentaires.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_6_15"><a class="anchor" href="#_6_15"></a>Quel lien unit les décisions d&#8217;exploitation aux remontées ? – Thèmes indépendants</h3>
<div class="sect3">
<h4 id="_6_15_1"><a class="anchor" href="#_6_15_1"></a>Généralités</h4>
<div class="paragraph">
<p>Une décision d&#8217;exploitation se rapporte toujours à une remontée mécanique donnée. Les deux classes concernées sont ainsi liées par une association.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/image68.png" alt="image68">
</div>
<div class="title">Figure 27. Les classes Remontee_RDI et DecisionExploitation sont liées par une association.</div>
</div>
<div class="paragraph">
<p>Les objets de ces deux classes sont cependant très différents. La mise en service d&#8217;une remontée mécanique requiert une somme de travail et d&#8217;efforts considérable si ben que ses propriétés sont généralement stables dans le temps. Tout changement de celles-ci (ou des billets) fait l&#8217;objet d&#8217;une décision de la direction. En revanche, les décisions d&#8217;exploitation sont prises quotidiennement et sont du ressort du responsable de l&#8217;exploitation.</p>
</div>
<div class="paragraph">
<p>Le fossé se creuse encore dans le cas des messages d&#8217;état générés automatiquement toutes les 20 minutes pour les remontées mécaniques les plus importantes. La saisie et le traitement des données s&#8217;opèrent par ailleurs avec des logiciels parfois différents. Il est donc logique que cette situation puisse se traduire dans le concept.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Les <strong>thèmes</strong> (topics) ordonnent la définition du modèle en fonction des <strong>compétences et du comportement au cours du temps</strong>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Ainsi s&#8217;ouvre une nouvelle possibilité : toutes les données n&#8217;ont pas nécessairement à être disponibles sur un système informatique donné, certains thèmes étant simplement lus et jamais modifiés.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Plusieurs <strong>conteneurs</strong> peuvent exister pour un thème, regroupant les données correspondant à ce thème.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Le système informatique des Remontées mécaniques de la Dent d&#8217;Ili comprend par exemple un conteneur pour les remontées mécaniques, un autre pour les billets et un conteneur pour chacun des différents aspects de l&#8217;exploitation. L&#8217;Association nationale gère également un conteneur pour les remontées mécaniques et un pour les billets. Les Remontées mécaniques de la Dent d&#8217;Ili lui transmettent toujours les modifications qui se sont produites dans leurs conteneurs des remontées mécaniques et des billets. Les Remontées mécaniques de la Dent Bleue et toutes les autres entreprises de transport en montagne envoient également leurs modifications à l&#8217;Association nationale ou lui transmettent périodiquement une copie de leurs conteneurs de données. L&#8217;Association intègre alors les données de ces conteneurs dans les siens.</p>
</div>
<div class="paragraph">
<p>La subdivision des modèles en différents thèmes permet de bien cibler la livraison des données. Seuls les conteneurs des thèmes présentant un intérêt pour le récepteur lui sont transmis.</p>
</div>
</div>
<div class="sect3">
<h4 id="_6_15_2"><a class="anchor" href="#_6_15_2"></a>Indépendance des thèmes</h4>
<div class="paragraph">
<p>Si une remontée mécanique est démolie, l&#8217;objet de données correspondant est supprimé. La modification est également communiquée à l&#8217;Association nationale. Si seul le conteneur des remontés mécaniques est transmis à cette occasion, une contradiction apparaîtra cependant dans les données de l&#8217;Association nationale puisque des zones tarifaires liées à cette remontée mécanique subsisteront malgré sa suppression. Manifestement, les relations dépassant les limites d&#8217;un thème sont un sujet particulièrement sensible.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Les thèmes doivent être aussi indépendants les uns des autres que possible. Les relations dépassant les limites des thèmes sont à éviter. Lorsqu&#8217;elles existent, elles doivent être identifiées de manière spécifique au sein du modèle.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>De telles relations sont assez facilement reconnaissables sur une représentation graphique d&#8217;un modèle pour peu que cette dernière désigne clairement les thèmes et les relations. Toute situation de ce type est à identifier par le mot-clé EXTERNAL dans le cas d&#8217;une représentation textuelle en notation INTERLIS 2. Elles n&#8217;est par ailleurs admise que si les thèmes ont explicitement été déclarés comme étant dépendants (DEPENDS ON). Les dépendances réciproques (même indirectes) ne sont pas permises.</p>
</div>
<div class="paragraph">
<p>Mais comment éviter des relations 'inter-thèmes' sans pour autant conserver toutes les informations au sein d&#8217;un seul et même thème ?</p>
</div>
</div>
<div class="sect3">
<h4 id="_6_15_3"><a class="anchor" href="#_6_15_3"></a>La responsabilité de l&#8217;émetteur et du récepteur</h4>
<div class="paragraph">
<p>La relation entre la décision d&#8217;exploitation et la remontée mécanique à laquelle elle se rapporte est cependant inévitable. Il est néanmoins judicieux de gérer les remontées mécaniques et les décisions d&#8217;exploitation dans des thèmes distincts. Et dans le cas de cette relation, tout problème d&#8217;adéquation entre éléments est exclu par hypothèse, pour la simple raison que la mise à jour des deux thèmes et des conteneurs qui y sont associés est assurée par les Remontées mécaniques de la Dent d&#8217;Ili. La possibilité de conflit ne peut toutefois pas toujours être exclue, en particulier lorsque des objets à durée de vie brève sont sollicités via des relations dans différents thèmes.</p>
</div>
<div class="paragraph">
<p>INTERLIS 2 s&#8217;en tient alors à la règle suivante :</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
La correction des relations au sein d&#8217;un conteneur est de la responsabilité de l&#8217;émetteur. Le récepteur doit s&#8217;accommoder du fait que des objets intervenant dans une relation dépassant le cadre d&#8217;un thème peuvent ne pas être connus à un instant donné. Le récepteur doit néanmoins pouvoir supposer que les relations « inter-thèmes » sont correctes lorsque les versions des conteneurs impliqués sont compatibles.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>La première règle, la correction interne d&#8217;un conteneur, est également à observer en cas de partition de ce conteneur, pour quelque raison que ce soit.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_6_16"><a class="anchor" href="#_6_16"></a>Les bonnes choses viennent d&#8217;en haut – Utiliser les modèles existants</h3>
<div class="paragraph">
<p>Les Ilinois ont plutôt bien fait les choses puisqu&#8217;ils n&#8217;ont pas tout récréé mais ont su se servir de modèles existants (Units, Beotie, Adresses, NatTour). Ils se sont cependant rendus coupables de quelques petites entorses à cette règle. Ainsi, la ligne béotienne (LigneBeotie) n&#8217;est-elle certainement pas propre au Val d&#8217;Ili et à ses remontées mécaniques mais devrait faire partie du modèle de données national béotien. De même, WGS84Coord et l&#8217;heure (du jour) ne sont pas véritablement des spécialités du val d&#8217;Ili.</p>
</div>
<div class="paragraph">
<p>Les Ilinois se sont en ce sens comportés de manière très normale. Ce qu&#8217;ils n&#8217;ont pas trouvé ailleurs, ils l&#8217;ont ajouté à leur modèle. C&#8217;est compréhensible, mais pas vraiment optimal.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<div class="title">Warning</div>
</td>
<td class="content">
Il ne faudrait pas simplement accepter l&#8217;absence de certaines définitions voire des définitions erronées à un niveau plus général (plus élevé), mais chercher à améliorer les modèles correspondants en collaboration avec les services compétents.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>C&#8217;est pourquoi il est également judicieux que des types de base soient prédéfinis à différents niveaux. INTERLIS met un certain nombre de modèles de base à la disposition des utilisateurs. D&#8217;autres modèles sont proposés par des communautés d&#8217;utilisateurs (par exemple des associations professionnelles). Certains enfin sont très spécifiques, comme celui des Remontées mécaniques de la Dent d&#8217;Ili.</p>
</div>
<div class="paragraph">
<p>Un certain nombre de sources diffusant des modèles de données standardisés sont mentionnées au paragraphe <a href="#_3_3">[_3_3]</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_6_17"><a class="anchor" href="#_6_17"></a>Les zones tarifaires ne suscitent guère d&#8217;intérêt – Vues</h3>
<div class="sect3">
<h4 id="_6_17_1"><a class="anchor" href="#_6_17_1"></a>Généralités</h4>
<div class="paragraph">
<p>Lorsqu&#8217;il est question de vues dans le contexte de la modélisation, il ne s&#8217;agit évidemment pas du panorama qui s&#8217;offre au spectateur depuis le sommet de la Dent d&#8217;Ili avec la Dent Cambrée en point de mire. Et pourtant, il existe une analogie entre ces deux types de vues. La Dent d&#8217;Ili, la Dent Cambrée et l&#8217;ensemble des sommets, des vallées et des villages des alentours sont représentés sur la carte topographique, les altitudes étant figurées par des courbes de niveau et des valeurs cotées. La carte ne présente pas directement le panorama du sommet de la Dent d&#8217;Ili mais elle contient toutes les informations nécessaires permettant à un lecteur averti d&#8217;en déduire la vue depuis le sommet de la Dent d&#8217;Ili. La carte permet d&#8217;avoir la certitude que la pointe que l&#8217;on voit se dresser au loin, à la gauche de la Dent Cambrée, n&#8217;est autre que l' « Aiguille Noire ».</p>
</div>
<div class="paragraph">
<p>Dans notre analogie, les classes d&#8217;objets, les structures et les relations d&#8217;un modèle correspondent aux éléments de la carte. Elles reproduisent fidèlement la réalité sans qu&#8217;un but précis ait été assigné à leur utilisation. Les vues d&#8217;un modèle sont comparables au panorama qui s&#8217;offre depuis le sommet de la Dent d&#8217;Ili. Leur mise en œuvre poursuit toutefois un but précis. Elles se fondent à cet effet sur des informations de base ou sur d&#8217;autres vues et les transforment de façon à apporter un soutien optimal à l&#8217;obtention du but assigné.</p>
</div>
<div class="paragraph">
<p>Mais pourquoi de telles vues doivent-elles alors faire partie intégrante du modèle ? Le modèle ne doit tout de même pas anticiper à ce point sur le lieu depuis lequel on profite du panorama, qu&#8217;il s&#8217;agisse de la Dent d&#8217;Ili, de la Dent Cambrée, de l&#8217;Aiguille Noire voire du bord du grand bassin, au cœur du jardin des thermes d&#8217;Ili-les-Bains.</p>
</div>
<div class="paragraph">
<p>Dans le contexte d&#8217;un modèle, les vues sont avant tout pertinentes pour des règles d&#8217;intégrité particulières (cf. § <a href="#_6_14_3">Conditions d&#8217;unicité</a>) et des relations dérivables (cf. § <a href="#_6_13_7">Relations dérivables</a>). Les vues sont également utiles lorsque les données sont à livrer sous une forme traitée pour un but bien spécifique, cas par exemple des données à fournir au service Internet du Val d&#8217;Ili. INTERLIS 2 offre de surcroît la possibilité de définir des graphiques. Il est fréquent que des vues et non les données originales elles-mêmes constituent la base de la définition graphique.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Les <strong>vues</strong> s&#8217;appuient sur des classes d&#8217;objets ou sur d&#8217;autres vues et combinent les objets initiaux de différentes manières pour en faire de nouveaux objets-vues.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Les vues d&#8217;INTERLIS sont comparables à celles des systèmes de banques de données.</p>
</div>
</div>
<div class="sect3">
<h4 id="_6_17_2"><a class="anchor" href="#_6_17_2"></a>La loi de formation des vues</h4>
<div class="paragraph">
<p>Le détail du tracé n&#8217;intéressera peut-être pas grand monde, la longueur de la piste suscitera en revanche un vif intérêt. De même, on prête généralement plus d&#8217;attention à l&#8217;âge d&#8217;une personne qu&#8217;à sa date de naissance. De telles propriétés peuvent se déduire d&#8217;autres informations. Si des propriétés « redondantes » de cette nature étaient saisies comme des données normales, le risque qu&#8217;elles ne soient pas toujours parfaitement à jour serait très élevé. L&#8217;âge d&#8217;une personne par exemple croît inéluctablement d&#8217;année en année !</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
La propriété la plus importante d&#8217;une vue est sa <strong>loi de formation.</strong> Elle définit la manière dont les objets-vues sont générés à partir des objets initiaux.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>La vue « PersonneAvecIndicationDeSonAge » est par exemple déduite de la classe d&#8217;objets « Personne » que l&#8217;on appelle la base. Une PersonneAvecIndicationDeSonAge possède les mêmes propriétés (ALL OF) auxquelles les mêmes valeurs sont associées que la personne initiale. La vue ajoute cependant une propriété supplémentaire « Age ». L&#8217;âge, se déduit (:=) de la différence entre l&#8217;année de naissance et l&#8217;année en cours.</p>
</div>
<div id="listing-06_17-01" class="listingblock">
<div class="title"><a href="#listing-06_17-01">Listing 06.17-01</a></div>
<div class="content">
<pre class="highlight"><code>VIEW PersonneAvecIndicationDeSonAge
  PROJECTION OF Personne
  =
  ALL OF Personne;
  Age: 0 .. 150 [y] := Difference (Personne -&gt; AnneeNaissance,
    PARAMETER AnneeEnCours);
END PersonneAvecIndicationDeSonAge;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Dans cet exemple, il existe exactement un objet-vue virtuel pour chaque objet de la classe de base : une PersonneAvecIndicationDeSonAge est associée à toute personne.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
La <strong>projection (PROJECTION)</strong> constitue la loi de formation la plus simple pour une vue. Elle s&#8217;appuie sur la base, reprend une partie (ou même la totalité) de ses attributs dans un ordre quelconque et peut leur adjoindre des attributs supplémentaires dérivés. Ainsi, elle sert avant tout à transcrire les attributs des objets actuels sous une forme plus propice à leur utilisation.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>L&#8217;Association nationale des offices de tourisme a défini une classe abstraite de « zone tarifaire ». Les Ilinois ne souhaitent cependant pas répertorier les différentes zones tarifaires dont chacune de leurs lignes fait partie. Ils ont en revanche défini des zones tarifaires géographiquement délimitées décrites par la classe « ZoneTarifaireDansSecteur » dans leur modèle. Cette classe possède une propriété « Secteur » caractérisant la limite géographique du domaine de validité.</p>
</div>
<div class="paragraph">
<p>Une remontée mécanique dont les stations inférieure et supérieure sont situées dans le secteur couvert par une telle zone tarifaire accepte automatiquement les billets correspondants.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/image69.png" alt="image69">
</div>
<div class="title">Figure 28. Quelle remontée mécanique se trouve dans le secteur couvert par quelle zone tarifaire ? Les Ilinois s&#8217;intéressent à tous les couples de remontées mécaniques (RM) et de ZoneTarifaireDansSecteur (ZT), pour lesquels deux conditions sont remplies : la station inférieure de la RM doit se trouver dans le secteur de la ZT et la station supérieure de la RM doit aussi se trouver dans le secteur de la ZT.</div>
</div>
<div class="paragraph">
<p>Mais concrètement, quelle remontée mécanique se trouve dans le secteur de quelle zone tarifaire ? Cette jonction entre remontée mécanique et zone tarifaire peut également être déduite par l&#8217;intermédiaire d&#8217;une vue.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
La loi de formation d&#8217;une vue la plus importante est certainement la <strong>jonction (JOIN)</strong>. Elle joint plusieurs objets de base au sein d&#8217;un objet-vue. La jonction revêt une importance particulière en tant que base pour des relations dérivées.
</td>
</tr>
</table>
</div>
<div id="listing-06_17-02" class="listingblock">
<div class="title"><a href="#listing-06_17-02">Listing 06.17-02</a></div>
<div class="content">
<pre class="highlight"><code>VIEW RemonteesMecaniquesDansSecteur
  JOIN OF RM ~ RemonteeMecanique,
    ZT ~ ZoneTarifaireDansSecteur;
  WHERE InSurface(RM -&gt; PosStationInf, ZT -&gt; Secteur) AND
    InSurface(RM -&gt; PosStationSup, ZT -&gt; Secteur);
  =
END RemonteesMecaniquesDansSecteur;</code></pre>
</div>
</div>
<div class="paragraph">
<p>La jonction procède d&#8217;abord à la formation de l&#8217;ensemble des couples : chacun des objets de la classe RemonteeMecanique est mis en relation avec chacun des objets de la classe ZoneTarifaireDansSecteur pour former un objet-vue virtuel.</p>
</div>
<div class="paragraph">
<p>La partie WHERE permet de restreindre l&#8217;ensemble de tous les objets-vues à ceux pour lesquels les conditions sont remplies. Seuls subsistent alors les couples de remontée mécanique <em>RM</em> et de zone tarifaire <em>ZT</em> pour lesquels les stations inférieure et supérieure de la <em>RM</em> se trouvent dans le secteur de la <em>ZT</em>. Sur l&#8217;illustration précédente, quatre des six couples possibles (trois remontées x deux zones tarifaires) remplissent les conditions.</p>
</div>
<table class="tableblock frame-all grid-all" style="width: 65%;">
<colgroup>
<col style="width: 32%;">
<col style="width: 21%;">
<col style="width: 47%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">Remontée mécanique <em>RM</em></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">Zone tarifaire <em>ZT</em></p></td>
<td class="tableblock halign-center valign-top"><div class="content"><div class="paragraph">
<p>stations inférieure et supérieure de <em>RM</em>
dans le secteur de <em>ZT</em> ?</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><span class="image"><img src="img/image70.png" alt="image70"></span></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><span class="image"><img src="img/image71.png" alt="image71"></span></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">oui</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><span class="image"><img src="img/image72.png" alt="image72"></span></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><span class="image"><img src="img/image71.png" alt="image71"></span></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">oui</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><span class="image"><img src="img/image73.png" alt="image73"></span></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><span class="image"><img src="img/image71.png" alt="image71"></span></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">non</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><span class="image"><img src="img/image70.png" alt="image70"></span></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><span class="image"><img src="img/image74.png" alt="image74"></span></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">non</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><span class="image"><img src="img/image72.png" alt="image72"></span></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><span class="image"><img src="img/image74.png" alt="image74"></span></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">oui</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><span class="image"><img src="img/image73.png" alt="image73"></span></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><span class="image"><img src="img/image74.png" alt="image74"></span></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">oui</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Figure 63 : Si l&#8217;on considère toutes les combinaisons possibles de remontée mécanique <em>RM</em><br>
et de zone tarifaire <em>ZT</em> de l&#8217;illustration précédente, seules les stations inférieure et supérieure de la <em>RM</em> de quatre d&#8217;entre elles (sur un total de six) se trouvent dans le secteur d&#8217;une <em>ZT.</em></p>
</div>
<div class="paragraph">
<p>Comme pour une projection, la dernière étape consiste à déterminer les propriétés à posséder par les objets-vues et la manière dont les valeurs associées sont obtenues. Dans la définition INTERLIS précédente, la partie suivant le signe d&#8217;égalité sert à cette fin.</p>
</div>
<div class="paragraph">
<p>Une remontée mécanique n&#8217;apparaîtra pas sur la vue si elle ne se trouve dans les limites d&#8217;aucune zone tarifaire. Une jonction particulière (dite « <strong>Outer Join</strong> ») permet toutefois d&#8217;exiger qu&#8217;un objet-vue soit généré même en l&#8217;absence de zone tarifaire pour une remontée mécanique donnée. Cette possibilité présente cependant peu d&#8217;intérêt dans le contexte des remontées mécaniques et des zones tarifaires de notre application concrète.</p>
</div>
<div class="paragraph">
<p>Si l&#8217;on souhaite répertorier toutes les coordonnées de stations inférieures et supérieures, on se heurte à un obstacle, à savoir au fait que ces coordonnées sont gérées sous forme d&#8217;attributs individuels de chacune des remontées mécaniques. L'<strong>union (UNION)</strong> permet cependant de les regrouper au sein d&#8217;un ensemble d&#8217;objets-vues égaux en droits.</p>
</div>
<div id="listing-06_17-03" class="listingblock">
<div class="title"><a href="#listing-06_17-03">Listing 06.17-03</a></div>
<div class="content">
<pre class="highlight"><code>VIEW CoordonneesStations
  UNION OF StationInferieure ~ RemonteeMecanique,
    StationSuperieure ~ RemonteeMecanique;
  =
  Coordonnees: Beotie.CoordNational := StationInferieure -&gt; PosStationInf,
    StationSuperieure -&gt; PosStationSup;
END CoordonneesStations;</code></pre>
</div>
</div>
<div class="paragraph">
<p>L&#8217;ensemble des objets-vues est ici deux fois plus étendu que celui des remontées mécaniques puisqu&#8217;il intègre la totalité des stations inférieures plus la totalité des stations supérieures. Ainsi, l&#8217;attribut est défini dans le respect de l&#8217;attribut de position de la station inférieure ou de la station supérieure, selon le cas.</p>
</div>
<div class="paragraph">
<p>L'<strong>agrégation (AGGREGATION)</strong> et l'<strong>inspection (INSPECTION)</strong> sont liées aux attributs de structures. Une agrégation regroupe des objets présentant certaines propriétés identiques au sein d&#8217;un objet unique. Les objets considérés jusqu&#8217;alors dans l&#8217;objet-vue sont disponibles en tant qu&#8217;éléments d&#8217;un attribut de structure (cf. § <a href="#_6_17_3">Constitution de vues pas à pas</a>). Une inspection veille au contraire à ce que des éléments structurés donnent naissance à des objets-vues indépendants (cf. § <a href="#_6_14_3">Conditions d&#8217;unicité</a>).</p>
</div>
</div>
<div class="sect3">
<h4 id="_6_17_3"><a class="anchor" href="#_6_17_3"></a>Constitution de vues pas à pas</h4>
<div class="paragraph">
<p>Pour le contrôle des billets, il est indispensable de connaître les types de billets valables sur chacune des remontées mécaniques. Il serait donc souhaitable de disposer d&#8217;un répertoire de toutes les remontées mécaniques indiquant les types de billets valables sur chacune d&#8217;entre elles. Les Ilinois désireraient par conséquent définir un modèle proche de ce qui suit, hors données de base :</p>
</div>
<div id="listing-06_17-04" class="listingblock">
<div class="title"><a href="#listing-06_17-04">Listing 06.17-04</a></div>
<div class="content">
<pre class="highlight"><code>CLASS TypeBillet =
  Noms: BAG {1..*} OF Designation;
  Prix: 0.00 .. 5000.00 [Beotie.Couronne];
  DureeValidite: Duree;
END TypeBillet;

CLASS RemonteeMecanique =
  Noms: BAG {1..*} OF Designation;
  TypesBilletsValables: BAG OF TypeBillet;
END RemonteeMecanique;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Comment dériver ces informations des données originales ? Ce n&#8217;est pas si simple. A une remontée mécanique peuvent être affectées plusieurs zones tarifaires, auxquelles sont à leur tour affectés plusieurs types de billets. Il existe en outre des zones tarifaires englobant toutes les remontées mécaniques d&#8217;un secteur.</p>
</div>
<div class="paragraph">
<p>Le dernier aspect de la question est heureusement déjà réglé puisqu&#8217;il existe une relation abstraite entre les remontés mécaniques et les zones tarifaires, la validité. Elle est d&#8217;une part mise en oeuvre par une relation explicite entre les deux classes (ValiditeExplicite) et la vue RemonteesMecaniquesDansSecteur permet d&#8217;autre part de dériver les remontées reconnaissant les billets d&#8217;une zone tarifaire donnée sur la base de leur position.</p>
</div>
<div class="paragraph">
<p>Une vue liant les remontées mécaniques aux types de billets peut alors être définie sur cette base :</p>
</div>
<div id="listing-06_17-05" class="listingblock">
<div class="title"><a href="#listing-06_17-05">Listing 06.17-05</a></div>
<div class="content">
<pre class="highlight"><code>VIEW RemonteeMecaniqueEtTypeBilletValable
  JOIN OF RM ~ RemonteeMecanique,
    ZT ~ ZoneTarifaire,
    TB ~ TypeBillet
    V ~ Validite;
  WHERE (V -&gt; RemonteeMecanique == RM) AND (V -&gt; ZoneTarifaire == ZT AND
    (TB -&gt; ZoneTarifaire == ZT);
  =
  NomRemontee: BAG {1..*} OF Designation := RM -&gt; Nom;
  NomBillet: BAG {1..*} OF Designation := TB -&gt; Nom;
  Prix: 0.00 .. 5000.00 [Beotie.Couronne] := TB -&gt; Prix;
  DureeValidite: Duree := TB -&gt; DureeValidite;
END RemonteeMecaniqueEtTypeBilletValable;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Cette jonction combine les remontées mécaniques et les types de billets. Elle tient compte de la relation de validité et du fait qu&#8217;un type de billet est affecté à une zone tarifaire devant coïncider avec celle de la relation de validité. Ainsi, le but est déjà quasiment atteint. Les combinaisons admissibles de remontée mécanique et de type de billet sont disponibles sous forme d&#8217;objets-vues. On souhaiterait encore pouvoir les regrouper par remontée mécanique :</p>
</div>
<div id="listing-06_17-06" class="listingblock">
<div class="title"><a href="#listing-06_17-06">Listing 06.17-06</a></div>
<div class="content">
<pre class="highlight"><code>VIEW TypeBilletValableSurRemonteeMecanique
  AGGREGATION OF RMetTBV ~ RemonteeMecaniqueEtTypeBilletValable
  EQUAL (RMetTBV -&gt; RM);
  =
  NomRemontee: BAG {1..*} OF Designation := RMetTBV -&gt; RM -&gt; Nom;
  TypesBillets: BAG OF RemonteeMecaniqueEtTypeBilletValable := AGGREGATES;
END TypeBilletValableSurRemonteeMecanique;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Un tel regroupement s&#8217;effectue au moyen d&#8217;une agrégation. Tous les objets de la vue de base remplissant une condition donnée (à savoir qu&#8217;ils appartiennent à la même remontée mécanique) sont regroupés au sein d&#8217;un objet-vue. L&#8217;ensemble de tous les objets-vues initiaux regroupés au sein d&#8217;un tout est à disposition dans ce cadre pour des attributs de structure (AGGREGATES).</p>
</div>
</div>
<div class="sect3">
<h4 id="_6_17_4"><a class="anchor" href="#_6_17_4"></a>Hériter des vues</h4>
<div class="paragraph">
<p>La définition de la vue présentant l&#8217;ensemble des types de billets valables pour chacune des remontées mécaniques (vue TypeBilletValableSurRemonteeMecanique, cf. ci-dessus) a déjà été effectuée par l&#8217;Association nationale. Les Ilinois souhaitent pouvoir l&#8217;utiliser. Ils désirent cependant pouvoir y intégrer l&#8217;attribut de tracé qu&#8217;ils ont défini dans leur propre extension de la classe des remontées mécaniques.</p>
</div>
<div id="listing-06_17-07" class="listingblock">
<div class="title"><a href="#listing-06_17-07">Listing 06.17-07</a></div>
<div class="content">
<pre class="highlight"><code>VIEW Remontee_RDIEtTypeBilletValable
  EXTENDS RemonteeMecaniqueEtTypeBilletValable
  BASE RM EXTENDED BY ReDI ~ Remontee_RDI
  =
  Trace := ReDI -&gt; Trace;
END Remontee_RDIEtTypeBilletValable;</code></pre>
</div>
</div>
<div class="paragraph">
<p>La définition d&#8217;une base supplémentaire (laquelle doit être une extension d&#8217;une base préexistante) permet de pouvoir accéder aux attributs concernés. Si un objet-vue ne repose pas sur cette extension (s&#8217;il ne s&#8217;agit donc pas d&#8217;une remontée RDI), l&#8217;attribut est indéfini.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Une extension de vue permet de pouvoir consulter les extensions des classes de la vue de base et par suite d&#8217;en exploiter les attributs. La loi de formation de la vue ne peut cependant pas être fondamentalement modifiée de la sorte. Il est uniquement possible de définir des sélections supplémentaires.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_6_18"><a class="anchor" href="#_6_18"></a>Les noms ne sont qu&#8217;apparence – Schéma dans une langue étrangère</h3>
<div class="paragraph">
<p>Désigner une remontée mécanique par une expression dans une autre langue ne change rien à ses propriétés qui restent identiques, ni aux relations qu&#8217;elle entretient avec d&#8217;autres classes. On peut éventuellement débattre du fait de savoir si toutes les langues permettent de tout exprimer avec la même précision, mais la règle suivante s&#8217;applique aux modèles de données : les concepts qui les sous-tendent sont identiques, quelle que soit la langue dans laquelle ils sont formulés. Seuls leurs noms sont différents.</p>
</div>
<div class="paragraph">
<p>La traduction d&#8217;un modèle dans une langue étrangère ne requiert donc qu&#8217;une conversion de l&#8217;ensemble des désignations et des remarques. La structure sous-jacente – les cases et les lignes du diagramme UML – reste inchangée. Il existe un outil pour les descriptions INTERLIS (le compilateur INTERLIS) contrôlant si une traduction ne fait qu&#8217;utiliser des noms différents ou si la structure a subi des modifications involontaires lors de ce processus.</p>
</div>
</div>
</div>
</div>
</div>
</body>
</html>